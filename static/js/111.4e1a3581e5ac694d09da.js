(window.webpackJsonp=window.webpackJsonp||[]).push([[111],{"/2K1":function(e,t,r){},"7Rfz":function(e,t,r){"use strict";r("/2K1")},RTSS:function(e,t,r){"use strict";r.r(t);var a={name:"addArea",props:{areaSelected:{type:Object,default:function(){}},parentOptions:{type:Array,default:function(){return[]}},dialogVisible:{type:Boolean,default:!1},parentId:"",isNewAdd:{type:Boolean,default:!0},showArea:{type:Object,default:function(){}}},data:function(){return{noshowArae:!0,topId:"",pID:this.parentId,visible:this.dialogVisible,ruleForm2:this.areaSelected.portName?this.areaSelected:{portName:"",portCode:"",parentId:""},rules:{portName:this.$rules.validate("请输入区域名称",12),portCode:this.$rules.validate("请输入区域代码",8),parentId:this.$rules.validate("请选择所属区域")}}},mounted:function(){console.log(this.areaSelected),this.areaSelected.level-0==0&&(this.noshowArae=!1),!this.areaSelected.guid&&this.pID&&(this.ruleForm2.parentId=this.pID),this.changeTree(this.parentOptions)},methods:{changeSite:function(){var e=this;setTimeout((function(){e.$refs.cascaderHandle.dropDownVisible=!1}))},changeTree:function(e){var t=this,r=[];!function e(a){return a.forEach((function(a,l){a.label=a.portName,a.value=a.guid,a.level-0==2&&(a.disabled=!0),t.ruleForm2.guid&&t.ruleForm2.guid===a.guid&&(a.disabled=!0),!1===a.isChange&&(a.disabled=!0),a.children&&a.children.length&&e(a.children),r.push(a)})),r}(e)},closeCallback:function(){this.$emit("editCallback")},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(console.log(e),!e)return!1;t.doAction()}))},doAction:function(){var e=this,t=this.ruleForm2;t.parentId&&(t.parentId&&t.parentId.length&&"[object Array]"===Object.prototype.toString.call(t.parentId)&&(t.parentId=t.parentId[t.parentId.length-1]),t.parentId.length||"[object Array]"!==Object.prototype.toString.call(t.parentId)||(t.parentId="")),console.log(t),t.guid?this.$request.editApartment(t).then((function(t){e.$message({type:"success",message:t.data}),e.$emit("editArea"),e.closeCallback()})):this.$request.addApartment(t).then((function(t){e.$emit("addAction",e.ruleForm2),e.$message({type:"success",message:t.data}),e.closeCallback()}))},resetForm:function(e){this.$refs[e].resetFields()}}},l=(r("7Rfz"),r("KHd+")),o=Object(l.a)(a,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{"close-on-click-modal":!e.ruleForm2.guid,width:"700px",visible:e.visible,"destroy-on-close":""},on:{"update:visible":function(t){e.visible=t},close:e.closeCallback}},[r("div",{staticClass:"dialogTitleDiy"},[e._v(e._s(e.ruleForm2.guid?"编辑区域":"添加区域"))]),e._v(" "),r("el-form",{ref:"ruleForm",staticClass:"addArea",attrs:{model:e.ruleForm2,"status-icon":"",rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"区域名称",prop:"portName"}},[r("el-input",{attrs:{placeholder:"请输入区域名称"},model:{value:e.ruleForm2.portName,callback:function(t){e.$set(e.ruleForm2,"portName",t)},expression:"ruleForm2.portName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"区域代码",prop:"portCode"}},[r("el-input",{attrs:{placeholder:"请输入区域代码"},model:{value:e.ruleForm2.portCode,callback:function(t){e.$set(e.ruleForm2,"portCode",t)},expression:"ruleForm2.portCode"}})],1),e._v(" "),e.noshowArae?r("el-form-item",{attrs:{label:"所属区域",prop:"parentId"}},[r("el-cascader",{ref:"cascaderHandle",attrs:{placeholder:"请选择所属区域",options:e.parentOptions,props:{checkStrictly:!0},clearable:""},on:{change:e.changeSite},model:{value:e.ruleForm2.parentId,callback:function(t){e.$set(e.ruleForm2,"parentId",t)},expression:"ruleForm2.parentId"}})],1):e._e(),e._v(" "),r("div",{staticClass:"btns",staticStyle:{"text-align":"center"}},[r("el-button",{attrs:{type:"primary",size:""},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v(e._s(e.ruleForm2.guid?"编辑":"新增"))]),e._v(" "),r("el-button",{attrs:{type:"info",size:""},on:{click:e.closeCallback}},[e._v("取消")])],1)],1)],1)}),[],!1,null,"5e6b41ae",null);t.default=o.exports}}]);