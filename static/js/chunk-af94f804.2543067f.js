(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-af94f804"],{"0e2b":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-button",{on:{click:t.upload}},[t._v("上传")]),r("global-uploader")],1)},i=[],s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"uploadFile-panel",attrs:{id:"global-uploader"}},[r("uploader",{ref:"uploader",staticClass:"uploader-app",attrs:{options:t.options,"auto-start":!1,"file-status-text":t.fileStatusText},on:{"files-added":t.onFilesAdd,"file-success":t.onFileSuccess,"file-progress":t.onFileProgress,"file-error":t.onFileError}},[r("uploader-unsupport"),r("uploader-btn",{ref:"uploadBtn",attrs:{id:"global-uploader-btn",attrs:t.attrs}},[r("i",{staticClass:"el-icon-plus fileAddIcon"})]),r("span",{directives:[{name:"show",rawName:"v-show",value:t.isdisable,expression:"isdisable"}],staticClass:"global-uploader-disable"},[r("span",[r("i",{staticClass:"el-icon-plus"})])]),r("uploader-list",{directives:[{name:"show",rawName:"v-show",value:t.panelShow,expression:"panelShow"}],scopedSlots:t._u([{key:"default",fn:function(e){return r("div",{staticClass:"file-panel",class:{collapse:t.collapse}},[r("div",{staticClass:"file-title"},[r("h2",{staticStyle:{color:"#606266","font-weight":"400"}},[t._v("文件列表")]),r("div",{staticClass:"operate"},[r("el-button",{staticClass:"mr8",attrs:{type:"text",title:t.collapse?"展开":"折叠"},on:{click:t.fileListShow}},[r("i",{class:t.collapse?"el-icon-full-screen":"el-icon-minus",staticStyle:{"font-weight":"700","font-size":"16px"}})]),r("el-button",{attrs:{type:"text",title:"关闭"},on:{click:t.close}},[r("i",{staticClass:"el-icon-close",staticStyle:{"font-weight":"700","font-size":"16px"}})])],1)]),r("ul",{class:["file-list","file-lists_"+t.fileCompentId]},[t._l(e.fileList,(function(t){return r("li",{key:t.id},[r("uploader-file",{ref:"files",refInFor:!0,class:"file_"+t.id,attrs:{file:t,list:!0}})],1)})),e.fileList.length?t._e():r("div",{staticClass:"no-file"},[r("i",{staticClass:"iconfont icon-empty-file"}),t._v(" 暂无待上传文件 ")])],2)])}}])})],1)],1)},o=[],a=r("5530"),f=(r("a9e3"),r("4de4"),r("d3b7"),r("159b"),r("b0c0"),r("99af"),r("b680"),r("1157")),u=r.n(f),l=r("69a0"),c=r.n(l),h=r("f766"),p=r("5f87");r("ac1f"),r("1276"),r("498a");function d(t){var e=t.lastIndexOf("."),r=t.length,n=t.substring(e+1,r),i=t.substring(0,e).trim();return i+"."+n.toLowerCase()}function b(){var t=[".png",".jpg",".jpeg",".gif",".bmp"],e=[".mp4",".rmvb",".mkv",".wmv",".flv"],r=[".doc",".docx",".xls",".xlsx",".ppt",".pptx",".pdf",".txt",".tif",".tiff"];return[].concat(t,e,r)}var g={props:{fileListArr:{type:Array,default:function(){return[]}},fileType:{type:Array,default:function(){return b()}},isdisable:{type:Boolean},fileCompentId:{type:Number,default:1}},data:function(){return{options:{target:h["a"],chunkSize:1048576,fileParameterName:"file",simultaneousUploads:3,maxChunkRetries:1,testChunks:!0,checkChunkUploadedByResponse:function(t,e){var r=JSON.parse(e);return!!r.data.skipUpload||(r.data.uploaded||[]).indexOf(t.offset+1)>=0},headers:{Authorization:Object(p["a"])()}},fileStatusText:{success:"上传成功",error:"上传失败",uploading:"上传中...",paused:"暂停",waiting:"排队中..."},attrs:{accept:b()},panelShow:!1,collapse:!1,errorList:[]}},computed:{uploader:function(){return this.$refs.uploader.uploader}},mounted:function(){var t=this;this.$bus.$on("openUploader",(function(e){t.params=e||{},t.$refs.uploadBtn&&u()("#global-uploader-btn").click()}))},destroyed:function(){this.$bus.$off("openUploader")},methods:{onFilesAdd:function(t){var e=this,r=!0;if(t&&t.length>0)for(var n=t.length>0?t:this.$refs.uploader.uploader.fileList.filter((function(t){return!t.completed})),i=0;i<n.length;i++){var s=n[i];if(r=this.beforeUpload(s,n),!r)break}else r=!1;r||(this.errorList=[],t.ignored=!0),this.panelShow=!0,t.forEach((function(t){e.computeMD5(t),e.$bus.$emit("fileAdded")}))},beforeUpload:function(t,e){var r=!1,n=!1;if(this.$refs.uploader.uploader.fileList.length>1)for(var i=this.$refs.uploader.uploader.fileList,s=0,o=0;o<i.length;o++){var a=i[o];if(a.completed||a.name!==t.name||s++,s>1&&(r=!0,-1===this.errorList.indexOf(1)&&(this.$message({type:"warning",message:"当前文件已在上传任务中",duration:1500}),this.errorList.push(1))),r)break}if(this.fileListArr.length>0){for(var f=0;f<this.fileListArr.length;f++){var u=this.fileListArr[f];if(d(u.filename)===d(t.name)&&(n=!0),n)break}if(n)return-1===this.errorList.indexOf(1)&&(this.$message({type:"warning",message:"文件名称不能重复",duration:1500}),this.errorList.push(1)),!1}return!r&&!n},onFileProgress:function(t,e,r){console.log("上传中 ".concat(e.name,"，chunk：").concat(r.startByte/1024/1024," ~ ").concat(r.endByte/1024/1024))},onFileSuccess:function(t,e,r,n){var i=null;if("string"===typeof r&&(i=JSON.parse(r)),i.data&&0===i.data)return this.$message({message:i.msg,type:"error"}),void this.statusSet(e.id,"failed");this.$bus.$emit("fileSuccess",{result:i,file:e})},onFileError:function(t,e,r,n){this.$message({message:r,type:"error"})},computeMD5:function(t){var e=this,r=new FileReader,n=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,i=0,s=1024e4,o=Math.ceil(t.size/s),a=new c.a.ArrayBuffer;function f(){var e=i*s,o=e+s>=t.size?t.size:e+s;r.readAsArrayBuffer(n.call(t.file,e,o))}this.statusSet(t.id,"md5"),t.pause(),f(),r.onload=function(r){if(a.append(r.target.result),i<o)i++,f(),e.$nextTick((function(){u()(".myStatus_".concat(t.id)).text("校验MD5 "+(i/o*100).toFixed(0)+"%")}));else{var n=a.end();e.computeMD5Success(n,t),e.$nextTick((function(){u()(".file_".concat(t.id," .uploader-file-resume")).removeAttr("style","")}))}},r.onerror=function(){this.error("文件".concat(t.name,"读取出错，请检查该文件")),t.cancel()}},computeMD5Success:function(t,e){var r={fileMd5:t,name:e.name,query:Object(a["a"])({},this.params)};Object.assign(this.uploader.opts,r),e.uniqueIdentifier=t,e.resume(),this.statusRemove(e.id)},fileListShow:function(){var t=u()(".file-lists_".concat(this.fileCompentId));t.is(":visible")?(t.slideUp(),this.collapse=!0):(t.slideDown(),this.collapse=!1)},close:function(){var t=this;this.$confirm("是否确定关闭窗口，关闭此窗口，未上传的文件将停止上传?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.uploader.cancel(),t.panelShow=!1})).catch((function(){}))},statusSet:function(t,e){var r={md5:{text:"校验MD5",bgc:"#fff"},merging:{text:"合并中",bgc:"#e2eeff"},transcoding:{text:"转码中",bgc:"#e2eeff"},failed:{text:"上传失败",bgc:"#ffe0e0"},success:{text:"上传成功",bgc:"#fff"},uploading:{text:"上传中...",bgc:"#fff"},paused:{text:"暂停",bgc:"#fff"},waiting:{text:"排队中...",bgc:"#fff"}};this.$nextTick((function(){u()('<p class="myStatus_'.concat(t,'"></p>')).appendTo(".file_".concat(t," .uploader-file-status")).css({position:"absolute",top:"0",left:"0",right:"0",bottom:"0",zIndex:"1",lineHeight:"14px",backgroundColor:r[e].bgc}).text(r[e].text),u()(".file_".concat(t," .uploader-file-resume")).css("display","none")}))},statusRemove:function(t){this.$nextTick((function(){u()(".myStatus_".concat(t)).remove()}))},error:function(t){this.$notify({title:"错误",message:t,type:"error",duration:2e3})}}},y=g,m=(r("b356"),r("2877")),v=Object(m["a"])(y,s,o,!1,null,"2c1ccd55",null),_=v.exports,A={components:{globalUploader:_},data:function(){return{}},computed:{},mounted:function(){this.$bus.$on("fileAdded",(function(){console.log("文件已选择")})),this.$bus.$on("fileSuccess",(function(t){console.log("文件上传成功",t)}))},destroyed:function(){this.$bus.$off("fileAdded"),this.$bus.$off("fileSuccess")},methods:{upload:function(){this.$bus.$emit("openUploader",{customParams:"自定义参数"})}}},w=A,x=Object(m["a"])(w,n,i,!1,null,"1b6f65ab",null);e["default"]=x.exports},"69a0":function(t,e,r){(function(e){t.exports=e()})((function(t){"use strict";var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function r(t,e){var r=t[0],n=t[1],i=t[2],s=t[3];r+=(n&i|~n&s)+e[0]-680876936|0,r=(r<<7|r>>>25)+n|0,s+=(r&n|~r&i)+e[1]-389564586|0,s=(s<<12|s>>>20)+r|0,i+=(s&r|~s&n)+e[2]+606105819|0,i=(i<<17|i>>>15)+s|0,n+=(i&s|~i&r)+e[3]-1044525330|0,n=(n<<22|n>>>10)+i|0,r+=(n&i|~n&s)+e[4]-176418897|0,r=(r<<7|r>>>25)+n|0,s+=(r&n|~r&i)+e[5]+1200080426|0,s=(s<<12|s>>>20)+r|0,i+=(s&r|~s&n)+e[6]-1473231341|0,i=(i<<17|i>>>15)+s|0,n+=(i&s|~i&r)+e[7]-45705983|0,n=(n<<22|n>>>10)+i|0,r+=(n&i|~n&s)+e[8]+1770035416|0,r=(r<<7|r>>>25)+n|0,s+=(r&n|~r&i)+e[9]-1958414417|0,s=(s<<12|s>>>20)+r|0,i+=(s&r|~s&n)+e[10]-42063|0,i=(i<<17|i>>>15)+s|0,n+=(i&s|~i&r)+e[11]-1990404162|0,n=(n<<22|n>>>10)+i|0,r+=(n&i|~n&s)+e[12]+1804603682|0,r=(r<<7|r>>>25)+n|0,s+=(r&n|~r&i)+e[13]-40341101|0,s=(s<<12|s>>>20)+r|0,i+=(s&r|~s&n)+e[14]-1502002290|0,i=(i<<17|i>>>15)+s|0,n+=(i&s|~i&r)+e[15]+1236535329|0,n=(n<<22|n>>>10)+i|0,r+=(n&s|i&~s)+e[1]-165796510|0,r=(r<<5|r>>>27)+n|0,s+=(r&i|n&~i)+e[6]-1069501632|0,s=(s<<9|s>>>23)+r|0,i+=(s&n|r&~n)+e[11]+643717713|0,i=(i<<14|i>>>18)+s|0,n+=(i&r|s&~r)+e[0]-373897302|0,n=(n<<20|n>>>12)+i|0,r+=(n&s|i&~s)+e[5]-701558691|0,r=(r<<5|r>>>27)+n|0,s+=(r&i|n&~i)+e[10]+38016083|0,s=(s<<9|s>>>23)+r|0,i+=(s&n|r&~n)+e[15]-660478335|0,i=(i<<14|i>>>18)+s|0,n+=(i&r|s&~r)+e[4]-405537848|0,n=(n<<20|n>>>12)+i|0,r+=(n&s|i&~s)+e[9]+568446438|0,r=(r<<5|r>>>27)+n|0,s+=(r&i|n&~i)+e[14]-1019803690|0,s=(s<<9|s>>>23)+r|0,i+=(s&n|r&~n)+e[3]-187363961|0,i=(i<<14|i>>>18)+s|0,n+=(i&r|s&~r)+e[8]+1163531501|0,n=(n<<20|n>>>12)+i|0,r+=(n&s|i&~s)+e[13]-1444681467|0,r=(r<<5|r>>>27)+n|0,s+=(r&i|n&~i)+e[2]-51403784|0,s=(s<<9|s>>>23)+r|0,i+=(s&n|r&~n)+e[7]+1735328473|0,i=(i<<14|i>>>18)+s|0,n+=(i&r|s&~r)+e[12]-1926607734|0,n=(n<<20|n>>>12)+i|0,r+=(n^i^s)+e[5]-378558|0,r=(r<<4|r>>>28)+n|0,s+=(r^n^i)+e[8]-2022574463|0,s=(s<<11|s>>>21)+r|0,i+=(s^r^n)+e[11]+1839030562|0,i=(i<<16|i>>>16)+s|0,n+=(i^s^r)+e[14]-35309556|0,n=(n<<23|n>>>9)+i|0,r+=(n^i^s)+e[1]-1530992060|0,r=(r<<4|r>>>28)+n|0,s+=(r^n^i)+e[4]+1272893353|0,s=(s<<11|s>>>21)+r|0,i+=(s^r^n)+e[7]-155497632|0,i=(i<<16|i>>>16)+s|0,n+=(i^s^r)+e[10]-1094730640|0,n=(n<<23|n>>>9)+i|0,r+=(n^i^s)+e[13]+681279174|0,r=(r<<4|r>>>28)+n|0,s+=(r^n^i)+e[0]-358537222|0,s=(s<<11|s>>>21)+r|0,i+=(s^r^n)+e[3]-722521979|0,i=(i<<16|i>>>16)+s|0,n+=(i^s^r)+e[6]+76029189|0,n=(n<<23|n>>>9)+i|0,r+=(n^i^s)+e[9]-640364487|0,r=(r<<4|r>>>28)+n|0,s+=(r^n^i)+e[12]-421815835|0,s=(s<<11|s>>>21)+r|0,i+=(s^r^n)+e[15]+530742520|0,i=(i<<16|i>>>16)+s|0,n+=(i^s^r)+e[2]-995338651|0,n=(n<<23|n>>>9)+i|0,r+=(i^(n|~s))+e[0]-198630844|0,r=(r<<6|r>>>26)+n|0,s+=(n^(r|~i))+e[7]+1126891415|0,s=(s<<10|s>>>22)+r|0,i+=(r^(s|~n))+e[14]-1416354905|0,i=(i<<15|i>>>17)+s|0,n+=(s^(i|~r))+e[5]-57434055|0,n=(n<<21|n>>>11)+i|0,r+=(i^(n|~s))+e[12]+1700485571|0,r=(r<<6|r>>>26)+n|0,s+=(n^(r|~i))+e[3]-1894986606|0,s=(s<<10|s>>>22)+r|0,i+=(r^(s|~n))+e[10]-1051523|0,i=(i<<15|i>>>17)+s|0,n+=(s^(i|~r))+e[1]-2054922799|0,n=(n<<21|n>>>11)+i|0,r+=(i^(n|~s))+e[8]+1873313359|0,r=(r<<6|r>>>26)+n|0,s+=(n^(r|~i))+e[15]-30611744|0,s=(s<<10|s>>>22)+r|0,i+=(r^(s|~n))+e[6]-1560198380|0,i=(i<<15|i>>>17)+s|0,n+=(s^(i|~r))+e[13]+1309151649|0,n=(n<<21|n>>>11)+i|0,r+=(i^(n|~s))+e[4]-145523070|0,r=(r<<6|r>>>26)+n|0,s+=(n^(r|~i))+e[11]-1120210379|0,s=(s<<10|s>>>22)+r|0,i+=(r^(s|~n))+e[2]+718787259|0,i=(i<<15|i>>>17)+s|0,n+=(s^(i|~r))+e[9]-343485551|0,n=(n<<21|n>>>11)+i|0,t[0]=r+t[0]|0,t[1]=n+t[1]|0,t[2]=i+t[2]|0,t[3]=s+t[3]|0}function n(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}function i(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t[e]+(t[e+1]<<8)+(t[e+2]<<16)+(t[e+3]<<24);return r}function s(t){var e,i,s,o,a,f,u=t.length,l=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=u;e+=64)r(l,n(t.substring(e-64,e)));for(t=t.substring(e-64),i=t.length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<i;e+=1)s[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(r(l,s),e=0;e<16;e+=1)s[e]=0;return o=8*u,o=o.toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(o[2],16),f=parseInt(o[1],16)||0,s[14]=a,s[15]=f,r(l,s),l}function o(t){var e,n,s,o,a,f,u=t.length,l=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=u;e+=64)r(l,i(t.subarray(e-64,e)));for(t=e-64<u?t.subarray(e-64):new Uint8Array(0),n=t.length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<n;e+=1)s[e>>2]|=t[e]<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(r(l,s),e=0;e<16;e+=1)s[e]=0;return o=8*u,o=o.toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(o[2],16),f=parseInt(o[1],16)||0,s[14]=a,s[15]=f,r(l,s),l}function a(t){var r,n="";for(r=0;r<4;r+=1)n+=e[t>>8*r+4&15]+e[t>>8*r&15];return n}function f(t){var e;for(e=0;e<t.length;e+=1)t[e]=a(t[e]);return t.join("")}function u(t){return/[\u0080-\uFFFF]/.test(t)&&(t=unescape(encodeURIComponent(t))),t}function l(t,e){var r,n=t.length,i=new ArrayBuffer(n),s=new Uint8Array(i);for(r=0;r<n;r+=1)s[r]=t.charCodeAt(r);return e?s:i}function c(t){return String.fromCharCode.apply(null,new Uint8Array(t))}function h(t,e,r){var n=new Uint8Array(t.byteLength+e.byteLength);return n.set(new Uint8Array(t)),n.set(new Uint8Array(e),t.byteLength),r?n:n.buffer}function p(t){var e,r=[],n=t.length;for(e=0;e<n-1;e+=2)r.push(parseInt(t.substr(e,2),16));return String.fromCharCode.apply(String,r)}function d(){this.reset()}return"5d41402abc4b2a76b9719d911017c592"!==f(s("hello"))&&function(t,e){var r=(65535&t)+(65535&e),n=(t>>16)+(e>>16)+(r>>16);return n<<16|65535&r},"undefined"===typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function e(t,e){return t=0|t||0,t<0?Math.max(t+e,0):Math.min(t,e)}ArrayBuffer.prototype.slice=function(r,n){var i,s,o,a,f=this.byteLength,u=e(r,f),l=f;return n!==t&&(l=e(n,f)),u>l?new ArrayBuffer(0):(i=l-u,s=new ArrayBuffer(i),o=new Uint8Array(s),a=new Uint8Array(this,u,i),o.set(a),s)}}(),d.prototype.append=function(t){return this.appendBinary(u(t)),this},d.prototype.appendBinary=function(t){this._buff+=t,this._length+=t.length;var e,i=this._buff.length;for(e=64;e<=i;e+=64)r(this._hash,n(this._buff.substring(e-64,e)));return this._buff=this._buff.substring(e-64),this},d.prototype.end=function(t){var e,r,n=this._buff,i=n.length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<i;e+=1)s[e>>2]|=n.charCodeAt(e)<<(e%4<<3);return this._finish(s,i),r=f(this._hash),t&&(r=p(r)),this.reset(),r},d.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},d.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},d.prototype.setState=function(t){return this._buff=t.buff,this._length=t.length,this._hash=t.hash,this},d.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},d.prototype._finish=function(t,e){var n,i,s,o=e;if(t[o>>2]|=128<<(o%4<<3),o>55)for(r(this._hash,t),o=0;o<16;o+=1)t[o]=0;n=8*this._length,n=n.toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(n[2],16),s=parseInt(n[1],16)||0,t[14]=i,t[15]=s,r(this._hash,t)},d.hash=function(t,e){return d.hashBinary(u(t),e)},d.hashBinary=function(t,e){var r=s(t),n=f(r);return e?p(n):n},d.ArrayBuffer=function(){this.reset()},d.ArrayBuffer.prototype.append=function(t){var e,n=h(this._buff.buffer,t,!0),s=n.length;for(this._length+=t.byteLength,e=64;e<=s;e+=64)r(this._hash,i(n.subarray(e-64,e)));return this._buff=e-64<s?new Uint8Array(n.buffer.slice(e-64)):new Uint8Array(0),this},d.ArrayBuffer.prototype.end=function(t){var e,r,n=this._buff,i=n.length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<i;e+=1)s[e>>2]|=n[e]<<(e%4<<3);return this._finish(s,i),r=f(this._hash),t&&(r=p(r)),this.reset(),r},d.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},d.ArrayBuffer.prototype.getState=function(){var t=d.prototype.getState.call(this);return t.buff=c(t.buff),t},d.ArrayBuffer.prototype.setState=function(t){return t.buff=l(t.buff,!0),d.prototype.setState.call(this,t)},d.ArrayBuffer.prototype.destroy=d.prototype.destroy,d.ArrayBuffer.prototype._finish=d.prototype._finish,d.ArrayBuffer.hash=function(t,e){var r=o(new Uint8Array(t)),n=f(r);return e?p(n):n},d}))},b356:function(t,e,r){"use strict";r("b724")},b724:function(t,e,r){},f766:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r("01ea"),i="".concat(n["a"],"cms/media/file/chunkUpload")}}]);