(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{"+7+g":function(e,t,a){"use strict";a("teir")},"2bfK":function(e,t,a){"use strict";a("TzdL")},"3vjG":function(e,t,a){"use strict";a.r(t);var n=a("HfcX"),l=a("sutq"),s={name:"watchCar",data:function(){return{noTableMaxHeight:"900px",showTable:!1,input1:{},tableData:[],width:"80%",height:"90%",left:"50px",top:"51px",pageSize:20,pageNow:1,channelMsg:{},tableSockt:null,pages:1,totalNum:1,showDrawer:!1}},mounted:function(){var e=this;this.getTableData(),this.tableSockt=new l.a({wsUrl:this.$getWebsockedUrl("ChannelMonitor.ws/","refreshToken"),getDataCallBack:this.getSocketMessageDiy}),this.tableSockt.initSocket(),this.$nextTick((function(){e.noTableMaxHeight=window.innerHeight-document.querySelector(".watchChannelSearch").offsetHeight-document.querySelector("#header").offsetHeight-document.querySelector(".watchChannelPagination").offsetHeight-45+"px",console.log(e.noTableMaxHeight)}))},methods:{tableSort:function(e){return e.sort((function(e,t){return e.channelOpenState&&!t.channelOpenState?-1:!e.channelOpenState&&t.channelOpenState?1:!e.channelOpenState&&!t.channelOpenState||e.channelOpenState&&t.channelOpenState?0:void 0})),e},getBjStatus:function(e){var t=0;switch(e){case"YP":case"FP":t=1;break;case"NP":case"EP":t=2;break;case"NN":t=0}return t},changeView:function(){this.showTable=!this.showTable},changeChannelOpenState:function(e){var t=this;this.showDrawer&&this.tableData.forEach((function(a,n){a.channelId===t.channelMsg.channelId&&t.$set(t.tableData[n],"channelOpenState",e)}))},getFontState:function(e){var t=this.mixinDriveType.filter((function(t,a){return t.value===e}));return t&&t.length?t[0].label:""},getCarType:function(e){var t=this.mixIncarOption2.filter((function(t,a){return t.value===e}));return t&&t.length?t[0].label:""},searchAction:function(e){this.input1=e,this.pageNow=1,this.getTableData()},getIoType:function(e){var t=this.mixinCarIoType.filter((function(t,a){return t.value===e}));return t&&t.length?t[0].label:""},filterChannel:function(e,t){return t.channelId===e},getChannelName:function(e){try{return this.mixinALlChannelGuid.filter((function(t){return t.value===e}))[0].label}catch(e){return""}},editSuccess:function(e){var t=this;this.tableData.forEach((function(a,n){a.guid===e.guid&&t.$set(t.tableData,n,e)}))},addCallBack:function(){this.tableData.length<this.pageSize&&this.getTableData()},deleteOne:function(e){var t=this;this.$confirm("确定删除？","确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"确定",center:!0,cancelButtonText:"取消"}).then((function(){t.$request.deleteCamera([e.guid]).then((function(a){t.$message({message:"删除成功!",type:"success"});var n=[];t.tableData.forEach((function(t,a){t!==e&&n.push(t)})),t.tableData=n}))})).catch((function(e){}))},filterTag:function(e,t){return t.type===e},clearUp:function(){this.input1={},this.pageNow=1,this.getTableData()},handleCurrentChange:function(){this.getTableData()},handleClickShow:function(e){var t=this.$router.resolve({path:"/hengqin",query:e});window.open(t.href,"_blank")},delData:function(e){var t=[];for(var a in e)t.push({label:e[a],text:e[a],value:a});return t},getTableData:function(){var e=this;this.$request.getChannelCameraList({data:this.input1,current:this.pageNow,size:this.pageSize}).then((function(t){e.tableData=e.tableSort(t.data.data),e.totalNum=t.data.total,e.pages=t.data.pages,console.log(t.data.data)}))},getSocketMessageDiy:function(e){if(e&&e.data&&(e.data.indexOf("{")>=0||e.data.indexOf("[")>=0)){var t=JSON.parse(e.data);console.log(t),t.cmdNo&&t.channelNo&&this.updateTable(t)}},updateTable:function(e){var t=this;this.tableData.forEach((function(a,n){if(e.channelNo===a.channelNo){var l=t.copySimple(a),s=e.data;for(var i in s)l[i]=s[i];if(!1===l.working){for(var o in l)"channelId"!==o&&"portOneLevelId"!==o&&"portTwoLevelId"!==o&&"channelNo"!==o&&"channelName"!==o&&"channelOpenState"!==o&&"ioType"!==o&&"channelType"!==o&&delete l[o];l.domesticNo=" ",l.foreignNo=" "}t.$set(t.tableData,n,l)}})),this.tableData=this.tableSort(this.copySimple(this.tableData))},editCallback:function(){this.showDrawer=!1},update:function(e){var t=this;this.tableData.forEach((function(a,n){a.channelNo===e.channelNo&&t.$set(t.tableData,n,e)}))}},destroyed:function(){this.tableSockt.destroyedSocket()},components:{SearchChannel:n.a}},i=(a("OooG"),a("2bfK"),a("huRu"),a("KHd+")),o=Object(i.a)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"watchChannelWrap watchChannelWrapBothBorder"},[n("SearchChannel",{staticClass:"watchChannelSearch",attrs:{showChange:"",mixinUserInOutType:e.mixinUserInOutType,mixinChannelType:e.mixinChannelType},on:{changeView:e.changeView,searchAction:e.searchAction,clearUp:e.clearUp}}),e._v(" "),e.showTable?e._e():n("div",{staticClass:"noTableContent",style:{maxHeight:e.noTableMaxHeight}},e._l(e.tableData,(function(t,l){return n("div",{key:l,class:e.showTable?"oneContent":"oneContent scaleAnima"},[n("div",{staticClass:"head"},[n("span",{staticClass:"left"},[e._v("\n              "+e._s(t.channelName)+"\n            ")]),e._v(" "),n("div",{staticClass:"right"},[n("span",{class:!0===t.channelOpenState?"status success":!1===t.channelOpenState?"status fail":"status"}),e._v(" "),n("span",{staticClass:"statusTxt"},[e._v(e._s(!0===t.channelOpenState?"在线":!1===t.channelOpenState?"离线":""))]),e._v(" "),n("i",{staticClass:"jump el-icon-s-promotion",on:{click:function(a){return e.handleClickShow(t)}}})])]),e._v(" "),n("div",{staticClass:"body"},[n("div",{staticClass:"picture"},[n("el-image",{staticClass:"img",attrs:{src:"data:image/jpeg;base64,"+t.mxtp,"preview-src-list":["data:image/jpeg;base64,"+t.mxtp],fit:"cover"}},[n("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[n("img",{attrs:{src:a("80Sv"),alt:""}})]),e._v(" "),n("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[n("img",{attrs:{src:a("80Sv"),alt:""}})])]),e._v(" "),n("el-image",{staticClass:"img",attrs:{src:e.mixinPictureBase+t.lightPicture,"preview-src-list":[e.mixinPictureBase+t.lightPicture],fit:"cover"}},[n("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[n("img",{attrs:{src:a("80Sv"),alt:""}})]),e._v(" "),n("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[n("img",{attrs:{src:a("80Sv"),alt:""}})])])],1),e._v(" "),n("div",{staticClass:"detail"},[0!==e.getBjStatus(t.bjPassState)?n("div",{class:1===e.getBjStatus(t.bjPassState)?"status":"status error"},[e._v("\n                "+e._s(1===e.getBjStatus(t.bjPassState)?"放行":2===e.getBjStatus(t.bjPassState)?"退车":"")+"\n              ")]):e._e(),e._v(" "),n("div",{staticClass:"one"},[n("span",[e._v("通道号")]),e._v(" "),n("span",[e._v(e._s(t.channelNo))])]),e._v(" "),t.domesticNo?n("div",{staticClass:"one"},[n("span",[e._v("国内车牌")]),e._v(" "),n("span",[e._v(e._s(t.domesticNo))])]):e._e(),e._v(" "),t.foreignNo?n("div",{staticClass:"one"},[n("span",[e._v("国外车牌")]),e._v(" "),n("span",[e._v(e._s(t.foreignNo))])]):e._e(),e._v(" "),t.xm?n("div",{staticClass:"one"},[n("span",[e._v("姓名")]),e._v(" "),n("span",[e._v(e._s(t.xm))])]):e._e(),e._v(" "),t.xm?n("div",{staticClass:"one"},[n("span",[e._v("性别")]),e._v(" "),n("span",[e._v(e._s(t.xbdm-0==1?"男":t.xbdm-0==2?"女":""))])]):e._e(),e._v(" "),t.zjhm?n("div",{staticClass:"one"},[n("span",[e._v("证件号")]),e._v(" "),n("span",[e._v(e._s(t.zjhm))])]):e._e(),e._v(" "),t.zjlbdm?n("div",{staticClass:"one"},[n("span",[e._v("证件类别")]),e._v(" "),n("span",[e._v(e._s(t.zjlbdm))])]):e._e()])])])})),0),e._v(" "),e.showTable?n("div",{},[n("div",{staticClass:"dataTable"},[n("el-table",{ref:"tableAutoMaxHeight",attrs:{data:e.tableData,"max-height":e.tableMaxHeight,size:"small"}},[n("el-table-column",{attrs:{prop:"channelName",label:"通道",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{prop:"channelNo",label:"通道号",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{prop:"channelOpenState",label:"通道状态",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("Tag",{attrs:{type:t.row.channelOpenState?"success":"danger"}},[e._v(e._s(t.row.channelOpenState?"在线":"离线"))])]}}],null,!1,3579751399)}),e._v(" "),n("el-table-column",{attrs:{prop:"domesticNo",label:"国内车牌",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{prop:"foreignNo",label:"国外车牌",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{prop:"xm",label:"姓名",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{prop:"xbdm",label:"性别",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.xbdm-0==1?"男":t.row.xbdm-0==2?"女":"")+"\n              ")]}}],null,!1,1299429370)}),e._v(" "),e.$showColumn(["look"])?n("el-table-column",{attrs:{align:"center",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("Icon",{directives:[{name:"stat",rawName:"v-stat",value:"look",expression:"'look'"}],attrs:{icon:"icon-chakan1",tip:"查看"},nativeOn:{click:function(a){return e.handleClickShow(t.row)}}})]}}],null,!1,1811599959)}):e._e()],1)],1)]):e._e(),e._v(" "),n("el-pagination",{staticClass:"watchChannelPagination",attrs:{"current-page":e.pageNow,"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalNum},on:{"size-change":e.$handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.pageNow=t},"update:current-page":function(t){e.pageNow=t}}})],1)}),[],!1,null,"75174609",null);t.default=o.exports},"80Sv":function(e,t){e.exports="data:image/png;base64,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"},Ea9X:function(e,t,a){},HfcX:function(e,t,a){"use strict";var n={name:"searchChannel",data:function(){return{formObj:{}}},props:{showChange:{type:Boolean,default:!1},mixinChannelType:{type:Array,default:function(){return[]}},mixinUserInOutType:{type:Array,default:function(){return[]}}},methods:{changeView:function(){this.$emit("changeView")},clearUp:function(){this.formObj={},this.$emit("clearUp")},searchAction:function(){this.$emit("searchAction",this.formObj)}}},l=(a("+7+g"),a("KHd+")),s=Object(l.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"searchBox"},[a("el-form",{staticClass:"formWrap",attrs:{model:e.formObj,inline:"","label-width":"90px"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchAction.apply(null,arguments)}}},[a("el-form-item",{attrs:{label:"通道:"}},[a("el-input",{attrs:{placeholder:"请输入通道名称"},model:{value:e.formObj.channelName,callback:function(t){e.$set(e.formObj,"channelName",t)},expression:"formObj.channelName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"出入境类型:"}},[a("el-select",{attrs:{placeholder:"请选择出入境类型"},model:{value:e.formObj.ioType,callback:function(t){e.$set(e.formObj,"ioType",t)},expression:"formObj.ioType"}},e._l(e.mixinUserInOutType,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"通道类型:"}},[a("el-select",{attrs:{placeholder:"请选择车辆类型"},model:{value:e.formObj.channelType,callback:function(t){e.$set(e.formObj,"channelType",t)},expression:"formObj.channelType"}},e._l(e.mixinChannelType,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),a("el-form-item",{staticClass:"hideBorder"},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:e.searchAction}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"info",size:"small",icon:"el-icon-delete"},on:{click:e.clearUp}},[e._v("清空")])],1),e._v(" "),e.showChange?a("div",{staticClass:"qiehuan"},[a("Icon",{attrs:{icon:"icon-qiehuan",tip:"切换视图",iconFontSize:"20"},nativeOn:{click:function(t){return e.changeView.apply(null,arguments)}}})],1):e._e()],1)],1)}),[],!1,null,"a2b37f88",null);t.a=s.exports},OooG:function(e,t,a){"use strict";a("SSQS")},SSQS:function(e,t,a){},TzdL:function(e,t,a){},huRu:function(e,t,a){"use strict";a("Ea9X")},teir:function(e,t,a){}}]);