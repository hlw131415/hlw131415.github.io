(window.webpackJsonp=window.webpackJsonp||[]).push([[31,102,119],{"2gPn":function(e,a,t){},"6jld":function(e,a,t){"use strict";t.r(a);var n={name:"searchCamera",data:function(){return{searchCamera:{}}},props:{showAdd:{default:function(){return!0},type:Boolean},channelList:{type:Array,default:function(){return[]}}},mounted:function(){},methods:{clearUp:function(){this.searchCamera={},this.sites="",this.$emit("clearUp")},searchAction:function(){this.$emit("searchAction",this.searchCamera)},addNewCamera:function(){this.$emit("addNewCamera")}}},i=(t("gY6U"),t("KHd+")),l=Object(i.a)(n,(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("div",{staticClass:"searchBox2 searchBox"},[t("el-form",{attrs:{inline:"",model:e.searchCamera,"label-width":"90px"},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.searchAction.apply(null,arguments)}}},[t("el-form-item",{attrs:{label:"相机名:"}},[t("el-input",{attrs:{placeholder:"请输入相机名",clearable:""},model:{value:e.searchCamera.cameraName,callback:function(a){e.$set(e.searchCamera,"cameraName",a)},expression:"searchCamera.cameraName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"相机地址:"}},[t("el-input",{attrs:{placeholder:"请输入相机地址",clearable:""},model:{value:e.searchCamera.cameraUrl,callback:function(a){e.$set(e.searchCamera,"cameraUrl",a)},expression:"searchCamera.cameraUrl"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"通道:"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择通道"},model:{value:e.searchCamera.channelId,callback:function(a){e.$set(e.searchCamera,"channelId",a)},expression:"searchCamera.channelId"}},e._l(e.channelList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),t("el-form-item",{staticClass:"hideBorder"},[t("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:e.searchAction}},[e._v("搜索")]),e._v(" "),t("el-button",{attrs:{type:"info",size:"small",icon:"el-icon-delete"},on:{click:e.clearUp}},[e._v("清空")]),e._v(" "),t("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:e.addNewCamera}},[e._v("添加")])],1)],1),e._v(" "),t("div",{staticClass:"tags"})],1)])}),[],!1,null,"3db75cdf",null);a.default=l.exports},AwpP:function(e,a,t){"use strict";t.r(a);var n={name:"addManual",props:{carOptions:{type:Array,default:function(){return[]}},channelList:{type:Array,default:function(){return[]}},inOutType:{type:Array,default:function(){return[]}},dialogVisible:{type:Boolean,default:!1},areaTree:{type:Array,default:function(){return[]}},addCamera2:{type:Object,default:function(){}},justLook:{type:Boolean,default:!1}},data:function(){return{rules:{cameraName:this.$rules.validate("请输入相机名",16),cameraUrl:this.$rules.validate("请输入相机地址",50),channelId:this.$rules.validate("请选择通道")},chepai:"",sites:"",roles:[],visible:this.dialogVisible,addCamera:this.addCamera2,formLabelWidth:"94px"}},mounted:function(){},methods:{submitNow:function(){var e=this;this.$refs.ruleForm.validate((function(a){if(!a)return!1;e.addCamera2.guid?e.$request.updateCamera(e.addCamera).then((function(a){e.$message({type:"success",message:a.data}),e.$emit("editCamera",e.addCamera),e.closeCallback()})):e.$request.addCamera(e.addCamera).then((function(a){e.$emit("addCallBack"),e.$message({type:"success",message:a.data}),e.closeCallback()}))}))},closeCallback:function(){this.$emit("editCallback")}}},i=(t("X/la"),t("KHd+")),l=Object(i.a)(n,(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("el-dialog",{attrs:{"close-on-click-modal":e.justLook,width:"900px",visible:e.visible,"destroy-on-close":""},on:{"update:visible":function(a){e.visible=a},close:e.closeCallback}},[t("div",{staticClass:"dialogTitleDiy"},[e._v(e._s(e.justLook?"查看相机":e.addCamera.guid?"编辑相机":"添加相机"))]),e._v(" "),t("div",{staticClass:"addCamera"},[t("el-form",{ref:"ruleForm",attrs:{disabled:e.justLook,"hide-required-asterisk":e.justLook,rules:e.rules,model:e.addCamera,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"相机名:",prop:"cameraName"}},[t("el-input",{attrs:{placeholder:"请输入相机名"},model:{value:e.addCamera.cameraName,callback:function(a){e.$set(e.addCamera,"cameraName",a)},expression:"addCamera.cameraName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"相机地址:",prop:"cameraUrl"}},[t("el-input",{attrs:{placeholder:"请输入相机地址"},model:{value:e.addCamera.cameraUrl,callback:function(a){e.$set(e.addCamera,"cameraUrl",a)},expression:"addCamera.cameraUrl"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"通道:",prop:"channelId"}},[t("el-select",{attrs:{placeholder:"请选择通道"},model:{value:e.addCamera.channelId,callback:function(a){e.$set(e.addCamera,"channelId",a)},expression:"addCamera.channelId"}},e._l(e.channelList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),e._v(" "),e.justLook?e._e():t("div",{staticClass:"btn block"},[t("el-button",{attrs:{type:"primary"},on:{click:e.submitNow}},[e._v(e._s(e.addCamera.guid?"编辑":"新增"))]),e._v(" "),t("el-button",{attrs:{type:"info"},on:{click:e.closeCallback}},[e._v("取消")])],1)])}),[],!1,null,"6e51cc2c",null);a.default=l.exports},JD7Y:function(e,a,t){"use strict";t("cnjn")},"X/la":function(e,a,t){"use strict";t("2gPn")},cnjn:function(e,a,t){},gY6U:function(e,a,t){"use strict";t("n7ME")},n7ME:function(e,a,t){},rg7g:function(e,a,t){"use strict";t.r(a);var n=t("AwpP"),i=t("6jld"),l={name:"cameraManage",mixins:[t("uf7H").f],data:function(){return{input1:{},tableData:[],dialogPassVisible:!1,pageSize:20,pageNow:1,addCamera:{},pages:1,totalNum:1,justLook:!1,addDisabled:!0,isNewAdd:!1}},mounted:function(){this.getTableData()},methods:{filterChannel:function(e,a){return a.channelId===e},getChannelName:function(e){try{return this.mixinALlChannelGuid.filter((function(a){return a.value===e}))[0].label}catch(e){return""}},editSuccess:function(e){var a=this;this.tableData.forEach((function(t,n){t.guid===e.guid&&a.$set(a.tableData,n,e)}))},addCallBack:function(){this.tableData.length<this.pageSize&&this.getTableData()},deleteOne:function(e){var a=this;this.$confirm("确定删除相机"+e.cameraName+"？","确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){a.$request.deleteCamera([e.guid]).then((function(t){a.$message({message:"删除成功!",type:"success"});var n=[];a.tableData.forEach((function(a,t){a!==e&&n.push(a)})),a.tableData=n}))})).catch((function(e){}))},filterTag:function(e,a){return a.type===e},clearUp:function(){this.input1={},this.pageNow=1,this.getTableData()},searchAction:function(e){this.input1=e,this.pageNow=1,this.getTableData()},handleCurrentChange:function(){this.getTableData()},handleClickShow2:function(e){this.addCamera=e,this.justLook=!0,this.dialogPassVisible=!0},handleClickShow:function(e){this.addCamera=this.copySimple(e),this.justLook=!1,this.dialogPassVisible=!0},delData:function(e){var a=[];for(var t in e)a.push({label:e[t],text:e[t],value:t});return a},getTableData:function(){var e=this;this.$request.getCameraList({data:this.input1,current:this.pageNow,size:this.pageSize}).then((function(a){e.tableData=a.data.data,e.totalNum=a.data.total,e.pages=a.data.pages}))},addNewCamera:function(){this.addCamera={},this.isNewAdd=!0,this.justLook=!1,this.dialogPassVisible=!0},editCallback:function(){this.dialogPassVisible=!1},editCamera:function(e){var a=this;this.tableData.forEach((function(t,n){t.guid===e.guid&&a.$set(a.tableData,n,e)}))}},components:{AddCamera:n.default,SearchTab:i.default}},r=(t("JD7Y"),t("KHd+")),s=Object(r.a)(l,(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("SearchTab",{attrs:{showAdd:e.$showColumn("add"),channelList:e.mixinALlChannelGuid},on:{addNewCamera:e.addNewCamera,clearUp:e.clearUp,searchAction:e.searchAction}}),e._v(" "),t("div",{},[t("div",{staticClass:"dataTable"},[t("el-table",{ref:"tableAutoMaxHeight",attrs:{data:e.tableData,"max-height":e.tableMaxHeight,size:"small"}},[t("el-table-column",{attrs:{prop:"cameraName",label:"相机名",sortable:""}}),e._v(" "),t("el-table-column",{attrs:{prop:"cameraUrl",label:"相机地址",sortable:""}}),e._v(" "),t("el-table-column",{attrs:{prop:"cameraNum",label:"相机个数",sortable:""}}),e._v(" "),t("el-table-column",{attrs:{prop:"channelId",label:"通道",filters:e.mixinALlChannelGuid,"filter-method":e.filterChannel,sortable:""},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n              "+e._s(e.getChannelName(a.row.channelId))+"\n            ")]}}])}),e._v(" "),e.$showColumn(["look","edit","delete"])?t("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("Icon",{directives:[{name:"stat",rawName:"v-stat",value:"look",expression:"'look'"}],attrs:{icon:"icon-chakan1",tip:"查看"},nativeOn:{click:function(t){return e.handleClickShow2(a.row)}}}),e._v(" "),t("Icon",{directives:[{name:"stat",rawName:"v-stat",value:"edit",expression:"'edit'"}],attrs:{icon:"icon-bianji",tip:"编辑"},nativeOn:{click:function(t){return e.handleClickShow(a.row)}}}),e._v(" "),t("Icon",{directives:[{name:"stat",rawName:"v-stat",value:"delete",expression:"'delete'"}],attrs:{icon:"icon-shanchu",tip:"删除"},nativeOn:{click:function(t){return e.deleteOne(a.row)}}})]}}],null,!1,146686705)}):e._e()],1),e._v(" "),t("el-pagination",{attrs:{"current-page":e.pageNow,"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalNum},on:{"size-change":e.$handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(a){e.pageNow=a},"update:current-page":function(a){e.pageNow=a}}})],1)]),e._v(" "),e.dialogPassVisible?t("AddCamera",{attrs:{justLook:e.justLook,addCamera2:e.addCamera,dialogVisible:e.dialogPassVisible,channelList:e.mixinALlChannelGuid},on:{editCamera:e.editCamera,addCallBack:e.addCallBack,editCallback:e.editCallback}}):e._e()],1)}),[],!1,null,"4f75f290",null);a.default=s.exports},uf7H:function(e,a,t){"use strict";t.d(a,"a",(function(){return i})),t.d(a,"b",(function(){return l})),t.d(a,"c",(function(){return r})),t.d(a,"i",(function(){return c})),t.d(a,"h",(function(){return u})),t.d(a,"g",(function(){return o})),t.d(a,"l",(function(){return h})),t.d(a,"f",(function(){return d})),t.d(a,"d",(function(){return m})),t.d(a,"k",(function(){return p})),t.d(a,"j",(function(){return f})),t.d(a,"e",(function(){return s}));var n=t("KEZ+"),i={data:function(){return{mixIncarOption:[{label:"汽车",value:1},{label:"货车",value:2}]}}},l={data:function(){return{mixIncarOption2:[]}},mounted:function(){this.mixinGetCarTypeList()},methods:{mixinGetCarTypeList:function(){var e=this;n.a.state.carTypeList&&n.a.state.carTypeList.length?this.mixIncarOption2=n.a.state.carTypeList:this.$request.getCarTypeList().then((function(a){var t=e.$objToArr(a.data);e.mixIncarOption2=t,n.a.state.carTypeList=t}))}}},r={data:function(){return{mixinCarIoType:[{label:"进口",value:"I",text:"进口"},{label:"出口",value:"O",text:"出口"}]}}},s={data:function(){return{mixinEntryExit:[{label:"入境",value:"I",text:"入境"},{label:"出境",value:"O",text:"出境"}]}}},c={data:function(){return{mixinChannelType:[]}},mounted:function(){this.mixinGetChannelType()},methods:{mixinGetChannelType:function(){var e=this;n.a.state.channelTypes&&n.a.state.channelTypes.length?this.mixinChannelType=n.a.state.channelTypes:this.$request.getChannelType().then((function(a){var t=e.$objToArr(a.data);e.mixinChannelType=t,n.a.state.channelTypes=t}))}}},u={data:function(){return{mixinChannelTag:[]}},mounted:function(){this.mixinGetChannelTag()},methods:{mixinGetChannelTag:function(){var e=this;n.a.state.channelTags&&n.a.state.channelTags.length?this.mixinChannelTag=n.a.state.channelTags:this.$request.getChannelTags().then((function(a){var t=e.$objToArr(a.data);e.mixinChannelTag=t,n.a.state.channelTags=t}))}}},o={data:function(){return{mixinAreaTree:[]}},mounted:function(){this.mixinGetAreaTree()},methods:{mixinGetAreaTree:function(){var e=this;this.$request.getApartmentTree().then((function(a){var t=a.data;e.$changeTree(t),e.mixinAreaTree=t}))}}},d={data:function(){return{mixinALlChannel:[],mixinALlChannelGuid:[]}},mounted:function(){this.mixinGetAllChannel()},methods:{mixinGetAllChannel:function(){var e=this;this.$request.getAllChannelData().then((function(a){var t=a.data,n=[],i=[];t.forEach((function(e,a){n.push({label:e.channelName,value:e.channelNo,text:e.channelName}),i.push({label:e.channelName,value:e.guid,text:e.channelName})})),e.mixinALlChannel=n,e.mixinALlChannelGuid=i}))}}},h={data:function(){return{mixinUserInOutType:[],mixinChannelInOutType:[]}},mounted:function(){this.mixinGetUserInOutType()},methods:{mixinGetUserInOutType:function(){var e=this;n.a.state.channelInOutType&&n.a.state.channelInOutType.length&&(this.mixinChannelInOutType=n.a.state.channelInOutType),n.a.state.userInOutType&&n.a.state.userInOutType.length?this.mixinUserInOutType=n.a.state.userInOutType:this.$request.getUserInOutType().then((function(a){var t=e.$objToArr(a.data);e.mixinUserInOutType=t,n.a.state.userInOutType=t;var i=[];t.forEach((function(e,a){""!==e.value&&i.push(e)})),e.mixinChannelInOutType=i,n.a.state.channelInOutType=i}))}}},m={data:function(){return{mixinDriveType:[{label:"正常入境",value:"0",text:"正常入境"},{label:"退出通道",value:"1",text:"退出通道"},{label:"驶入退车",value:"2",text:"驶入退车"}]}}},f={data:function(){return{mixinPictureBase:""}},mounted:function(){var e=this;console.log(n.a.state.mixinPictureBase),n.a.state.mixinPictureBase&&n.a.state.mixinPictureBase.length?this.mixinPictureBase=n.a.state.mixinPictureBase:this.$request.getPictureInfoBase().then((function(a){console.log(a),a.data&&(e.mixinPictureBase="http://"+a.data+"?id=",n.a.state.mixinPictureBase="http://"+a.data+"?id=")}))}},p={data:function(){return{mixinResult:[{label:"放行",value:"YP",text:"放行"},{label:"不放行",value:"NP",text:"不放行"},{label:"查验",value:"CP",text:"查验"},{label:"退车",value:"EP",text:"退车"},{label:"未处理",value:"NN",text:"未处理"},{label:"应急放行",value:"TP",text:"应急放行"},{label:"人工拦截",value:"MN",text:"人工拦截"},{label:"放行",value:"QYP",text:"放行"},{label:"不放行",value:"QNP",text:"不放行"},{label:"查验",value:"QCP",text:"查验"},{label:"退车",value:"QEP",text:"退车"}]}}}}}]);