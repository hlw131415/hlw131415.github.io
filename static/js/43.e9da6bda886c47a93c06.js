(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{MEog:function(e,t,a){"use strict";a("fw0V")},RQ2Q:function(e,t,a){"use strict";a("inZ3")},fw0V:function(e,t,a){},inZ3:function(e,t,a){},rbZh:function(e,t,a){"use strict";var n={name:"searchTab",data:function(){return{input2:""}},props:{labelWidth:{type:String,default:"80px"},firstSearchName:{type:String,default:""},placeholder:{type:String,default:"支持模糊查询"},hiddenAdd:{type:Boolean,default:function(){return!1}},searchName:{type:String,default:"名称"},whatName:{type:String,default:"角色"}},methods:{clearUp:function(){this.input2="",this.$emit("clearUp")},searchAction:function(){this.$emit("searchAction",this.input2)},addNewRole:function(){this.$emit("addNewRole")}}},i=(a("RQ2Q"),a("KHd+")),s=Object(i.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"searchBox"},[a("div",[a("div",{staticClass:"inputWrap"},[a("el-form",{attrs:{"label-width":e.labelWidth,inline:""}},[a("el-form-item",{attrs:{label:e.searchName?e.searchName+":":""}},[a("el-input",{staticStyle:{display:"inline-block",width:"246px",margin:"0 24px 0 4px"},attrs:{placeholder:e.placeholder,size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchAction.apply(null,arguments)}},model:{value:e.input2,callback:function(t){e.input2=t},expression:"input2"}})],1),e._v(" "),a("el-form-item",{staticClass:"hideBorder"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchAction}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"info",icon:"el-icon-delete"},on:{click:e.clearUp}},[e._v("清空")]),e._v(" "),e.hiddenAdd?e._e():a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addNewRole}},[e._v("添加")])],1)],1),e._v(" "),e._t("totalNum")],2)])])])}),[],!1,null,"7ff3c41f",null);t.a=s.exports},vwG8:function(e,t,a){"use strict";a.r(t);var n={name:"onlineUserManage",data:function(){return{input1:"",searchUser:"",selectList:"",dialogPassVisible:!1,tableData:[],totalNum:0,pageSize:20,pageNow:1,searchUserOptions:[{label:"在线",text:"在线",value:"Online"},{label:"离线",text:"离线",value:"Offline"},{label:"锁定",text:"锁定",value:"Locked"}],areaTree:[],addDisabled:!1,addUserProp:{},addProp:{},justLook:!1,isNewAdd:!0,outTypes:[]}},mounted:function(){this.getTableData()},methods:{filterType:function(e,t){return t.userState===e},handleOffline:function(e){var t=this;this.$confirm("确定强制用户"+e.userName+"下线？","确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"取消",center:!0}).then((function(){t.$request.forceOfflineUser({userId:e.userId,onlineKey:e.onlineKey}).then((function(a){t.$message({message:a.data,type:"success"}),t.tableData.forEach((function(a,n){a===e&&t.tableData.splice(n,1)})),t.totalNum=t.totalNum-1}))})).catch((function(e){}))},handleUnlock:function(e){var t=this;this.$confirm("确定解锁？","确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){t.$request.unlockOnlineUser({userId:e.userId}).then((function(e){t.$message({message:e.data,type:"success"}),t.getTableData()}))})).catch((function(e){}))},handleLock:function(e){var t=this;this.$confirm("确定锁定该用户并下线？","确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){t.$request.lockOnlineUser({userId:e.userId}).then((function(a){t.$message({message:a.data,type:"success"}),t.tableData.forEach((function(a,n){a===e&&(t.tableData[n].userState="Locked")}))}))})).catch((function(e){}))},handleCurrentChange:function(e){this.pageNow=e,this.getTableData()},getTableData:function(){var e=this;this.$request.getOnlineUser({data:{userName:this.input1},size:this.pageSize,current:this.pageNow}).then((function(t){e.tableData=t.data.data,e.totalNum=t.data.total}))},filterTag:function(e,t){return t.inOutType===e},handleClickShow:function(e){this.justLook=!0,this.addProp=e,this.dialogPassVisible=!0},handleClickEdit:function(e){this.justLook=!1,this.addProp=e,this.dialogPassVisible=!0},handleClickDelete:function(e){var t=this;this.$confirm("确定删除？","确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){var a=[];a.push(e.guid),t.$request.deleteUser(a).then((function(a){t.$message({message:"删除成功!",type:"success"});var n=[];t.tableData.forEach((function(t,a){t!==e&&n.push(t)})),t.tableData=n}))})).catch((function(e){}))},handleClickReset:function(e){var t=this;this.$confirm("确定重置"+e.userName+"的密码？","确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){t.$request.resetPassword({account:e.account}).then((function(e){t.$message({message:"重置密码成功!",type:"success"})}))})).catch((function(e){}))},searchAction:function(e){this.input1=e,this.pageNow=1,this.getTableData()},clearUp:function(){this.input1="",this.searchUser="",this.pageNow=1,this.getTableData()}},components:{Search:a("rbZh").a}},i=(a("MEog"),a("KHd+")),s=Object(i.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Search",{attrs:{searchName:"搜索",whatName:"用户",placeholder:"输入用户名查询",hiddenAdd:""},on:{searchAction:e.searchAction,clearUp:e.clearUp}},[a("template",{slot:"totalNum"},[a("span",{staticClass:"numwrap"},[e._v("\n                     在线总人数: "),a("span",{staticClass:"num"},[e._v(e._s(e.totalNum))])])])],2),e._v(" "),a("div",{},[a("div",{staticClass:"dataTable"},[a("el-table",{ref:"tableAutoMaxHeight",attrs:{size:"small","max-height":e.tableMaxHeight,data:e.tableData,"default-sort":{prop:"date",order:"descending"}}},[a("el-table-column",{attrs:{prop:"account",label:"账号",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"用户名",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"loginIp",label:"登录IP",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"loginTime",label:"登录时间",sortable:""}}),e._v(" "),e.$showColumn(["forceOffline"])?a("el-table-column",{attrs:{align:"center",label:"操作",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("Icon",{directives:[{name:"stat",rawName:"v-stat",value:"forceOffline",expression:"'forceOffline'"}],attrs:{icon:"icon-guanbi",tip:"强制下线"},nativeOn:{click:function(a){return e.handleOffline(t.row)}}})]}}],null,!1,607525540)}):e._e()],1)],1)]),e._v(" "),a("el-pagination",{attrs:{"current-page":e.pageNow,"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalNum},on:{"size-change":e.$handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.pageNow=t},"update:current-page":function(t){e.pageNow=t}}})],1)}),[],!1,null,"5ba39c62",null);t.default=s.exports}}]);