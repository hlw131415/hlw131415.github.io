(window.webpackJsonp=window.webpackJsonp||[]).push([[117],{fUeD:function(t,e,i){},hrhV:function(t,e,i){"use strict";i.r(e);var s={name:"editConfig",props:{routeData:{type:Array,default:function(){return[]}},isNewAdd:{default:!0,type:Boolean},parentId:"",dialogVisible:{default:!1,type:Boolean},editObj:{type:Object,default:function(){return{}}},treeOptions:{type:Array,default:function(){return[]}}},data:function(){return{isPage:!1,componentPath:"",pID:this.parentId,delTree:this.changeTree(this.treeOptions),authType:1,visible:this.dialogVisible,authTypeOption:[{value:1,label:"菜单"},{value:2,label:"页面"},{value:3,label:"按钮"}]}},mounted:function(){this.isNewAdd&&this.formatObj(this.editObj),this.editObj.componentPath&&(this.componentPath=this.editObj.componentPath-0),this.editObj.parentId&&console.log(this.editObj.parentId)},methods:{changeType:function(t){this.isPage=2===t},changeTree:function(t){var e=[];!function t(i){return i.forEach((function(i,s){i.label=i.authName,i.value=i.guid,i.children&&i.children.length&&t(i.children),e.push(i)})),e}(t)},change:function(){},handleChange:function(t){console.log(t),console.log(this.editObj.parentId)},submitConfig:function(){var t=!0,e="";this.$isEmpty(this.editObj.authName)&&(t=!1,e="请输入名称"),2===this.editObj.authType&&this.$isEmpty(this.editObj.authPath)&&(t=!1,e="请输入路径"),t?this.ajaxConfig():this.$message({message:e})},ajaxConfig:function(){var t=this,e=this.editObj;e.parentId&&e.parentId.length&&"[object Array]"===Object.prototype.toString.call(e.parentId)&&(e.parentId=e.parentId[e.parentId.length-1]),e.parentId&&!e.parentId.length&&"[object Array]"===Object.prototype.toString.call(e.parentId)&&(e.parentId=""),e.componentPath=this.componentPath,2!==e.authType&&(e.componentPath="",e.authPath=""),console.log(e),this.isNewAdd?this.$request.newAddConfig(e).then((function(i){t.$emit("addNew",e),t.$message({message:i.desc,type:"success"}),t.closeCallback()})):this.$request.editConfig(e).then((function(i){t.$emit("editOne",e),t.$message({message:i.desc,type:"success"}),t.closeCallback()}))},closeCallback:function(){this.$emit("closeDialog")},formatObj:function(t){t.authType||this.$set(this.editObj,"authType",1),t.name?this.$set(this.editObj,"name",""):this.$set(this.editObj,"name",t.cnName),this.$set(this.editObj,"parentId",this.parentId),t.hasOwnProperty("authType")||this.$set(this.editObj,"authType",1),t.hasOwnProperty("isVisible")||this.$set(this.editObj,"isVisible",!0),t.hasOwnProperty("isVerify")||this.$set(this.editObj,"isVerify",!0),t.authTitle?this.$set(this.editObj,"authTitle",""):this.$set(this.editObj,"authTitle",t.cnName),t.authPath?this.$set(this.editObj,"authPath",""):this.$set(this.editObj,"authPath",t.path),this.$set(this.editObj,"authName",""),this.$set(this.editObj,"guid","")}}},a=(i("pAAp"),i("KHd+")),n=Object(a.a)(s,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{staticStyle:{"text-indent":"0"},attrs:{title:t.isNewAdd?"添加功能模块":"编辑功能模块",inline:"true",width:"700px",visible:t.visible,"destroy-on-close":""},on:{"update:visible":function(e){t.visible=e},close:t.closeCallback}},[i("div",{staticClass:"editwrap"},[i("el-form",{attrs:{"label-position":"right",size:"small","label-width":"110px"}},[t.editObj.guid?i("el-form-item",{attrs:{label:"ID:"}},[i("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.editObj.guid,callback:function(e){t.$set(t.editObj,"guid",e)},expression:"editObj.guid"}}),t._v(" "),i("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{size:"small"},model:{value:t.editObj.guid,callback:function(e){t.$set(t.editObj,"guid",e)},expression:"editObj.guid"}})],1):t._e(),t._v(" "),i("el-form-item",{attrs:{label:"名称:"}},[i("el-input",{attrs:{size:"small"},model:{value:t.editObj.authName,callback:function(e){t.$set(t.editObj,"authName",e)},expression:"editObj.authName"}})],1),t._v(" "),t.editObj.authType&&1!==t.editObj.authType?i("el-form-item",{attrs:{label:"URL路径:"}},[i("el-input",{attrs:{size:"small"},model:{value:t.editObj.authPath,callback:function(e){t.$set(t.editObj,"authPath",e)},expression:"editObj.authPath"}})],1):t._e(),t._v(" "),i("el-form-item",{attrs:{label:"上级菜单:"}},[i("el-cascader",{attrs:{options:t.treeOptions,props:{checkStrictly:!0},clearable:""},on:{change:t.handleChange},model:{value:t.editObj.parentId,callback:function(e){t.$set(t.editObj,"parentId",e)},expression:"editObj.parentId"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"是否可见:"}},[i("el-switch",{model:{value:t.editObj.isVisible,callback:function(e){t.$set(t.editObj,"isVisible",e)},expression:"editObj.isVisible"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"是否需要鉴权:"}},[i("el-switch",{model:{value:t.editObj.isVerify,callback:function(e){t.$set(t.editObj,"isVerify",e)},expression:"editObj.isVerify"}})],1)],1)],1),t._v(" "),i("div",{staticClass:"btn"},[i("el-button",{attrs:{type:"primary"},on:{click:t.submitConfig}},[t._v(t._s(t.isNewAdd?"添加":"提交"))])],1)])}),[],!1,null,"3c2598d3",null);e.default=n.exports},pAAp:function(t,e,i){"use strict";i("fUeD")}}]);