(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4bb1ec35"],{"076e":function(t,e,a){},"14af":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{"min-height":"400px"}},[a("div",{attrs:{slot:"header"},slot:"header"},[t._v(" "+t._s(t.title)+" "),a("right-toolbar",{attrs:{"show-seacher-btn":!1},on:{queryTable:t.getList}})],1),0==t.total?a("div",{staticClass:"el-dialog__title",staticStyle:{"text-align":"center","line-height":"300px"}},[t._v(" 暂无被分享的DCV主机 ")]):[a("el-row",{attrs:{gutter:10}},t._l(t.tableList,(function(e,r){return a("el-col",{key:r,attrs:{xs:24,sm:12,md:12,lg:8,xl:6}},[a("el-card",{staticClass:"box-card",staticStyle:{"margin-bottom":"10px",border:"0px"},attrs:{shadow:"hover","body-style":{padding:"0px 20px",textAlign:"right"}}},[a("div",{staticClass:"clearfix",staticStyle:{position:"relative"},attrs:{slot:"header"},slot:"header"},[a("el-row",[a("el-col",{attrs:{xs:12,sm:10,md:8,lg:8,xl:8}},[a("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.url,fit:"fill"}}),a("div"),a("el-image",{staticStyle:{width:"66%",height:"90%",margin:"-50px 0px -30px 8px"},attrs:{src:t.statusUrl,fit:"scale-down"}})],1),a("el-col",{attrs:{xs:12,sm:14,md:16,lg:16,xl:16}},[e.equipment?a("p",{staticClass:"el-dialog__title",staticStyle:{margin:"0px"}},[t._v(" "+t._s(e.equipment.name)+" "),a("span",{staticClass:"online-user-tips"},[t._v(" ("+t._s(e.equipment.onlineUser)+"人在线) ")]),2==e.equipment.useStatus?a("span",{staticClass:"disabled-tips"},[t._v(" -- 已禁用 ")]):t._e()]):t._e(),a("p",{staticClass:"el-dialog__title",staticStyle:{"font-size":"15px"}},[t._v("来自："+t._s(e.sharer.username))]),a("p",{staticClass:"el-dialog__title",staticStyle:{"font-size":"15px"}},[t._v("有效期："+t._s(t.parseTimeStr(e.shareTime)))]),a("p",{staticClass:"el-dialog__title",staticStyle:{"font-size":"15px"}},[t._v(t._s(e.equipment.remark))])])],1)],1),2!=e.equipment.useStatus?a("div",{staticClass:"btn"},[1==e.status?a("el-button",{attrs:{type:"text",icon:"el-icon-link",loading:t.remoteLoading},nativeOn:{click:function(a){return a.preventDefault(),t.remoteHandle(e)}}},[t._v("开始连接")]):t._e(),2==e.status?a("el-button",{attrs:{disabled:"",type:"text",icon:"el-icon-link"}},[t._v("暂停使用")]):t._e()],1):t._e()])],1)})),1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],attrs:{total:t.total,page:t.queryParams.page,"append-to-body":"",limit:t.queryParams.pageCount},on:{"update:page":function(e){return t.$set(t.queryParams,"page",e)},"update:limit":function(e){return t.$set(t.queryParams,"pageCount",e)},pagination:t.getList}})]],2)],1)},i=[],n=a("7eb6"),s={components:{},props:{title:{type:String,default:""}},data:function(){return{loading:!1,tableList:[],listLoading:!1,queryParams:{page:1,pageCount:10},remoteLoading:!1,total:0,url:a("7408"),statusUrl:a("2ab5")}},computed:{},created:function(){this.getList()},methods:{getList:function(){var t=this;this.listLoading=!0,Object(n["d"])(this.queryParams).then((function(e){t.listLoading=!1,t.tableList=e.data.records,t.total=e.data.total}))},remoteHandle:function(t){var e=this;this.remoteLoading=!0,Object(n["e"])(t.id).then((function(t){e.remoteLoading=!1,window.open(t.data),console.log("open",t.data)})).catch((function(t){console.log(t),e.remoteLoading=!1}))},parseTimeStr:function(t){var e=JSON.parse(t);return e.beginTime+"-"+e.endTime}}},o=s,l=(a("3b1e"),a("2877")),c=Object(l["a"])(o,r,i,!1,null,"f344d49e",null);e["default"]=c.exports},1618:function(t,e,a){},"1d25":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{"min-height":"400px"}},[a("div",{attrs:{slot:"header"},slot:"header"},[t._v(" "+t._s(t.title)+" "),a("right-toolbar",{attrs:{"show-seacher-btn":!1},on:{queryTable:t.getList}})],1),0==t.total?a("div",{staticClass:"el-dialog__title",staticStyle:{"text-align":"center","line-height":"300px"}},[t._v(" 暂无分配DCV设备 ")]):[a("el-row",{attrs:{gutter:10}},t._l(t.tableList,(function(e,r){return a("el-col",{key:r,attrs:{xs:24,sm:12,md:12,lg:8,xl:6}},[a("el-card",{staticClass:"box-card",staticStyle:{"margin-bottom":"10px",border:"0px"},attrs:{shadow:"hover","body-style":{padding:"0px 20px",textAlign:"right"}}},[a("div",{staticClass:"clearfix",staticStyle:{position:"relative"},attrs:{slot:"header"},slot:"header"},[a("el-row",[a("el-col",{attrs:{xs:12,sm:10,md:8,lg:8,xl:8}},[a("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.url,fit:"fill"}}),a("div"),a("el-image",{staticStyle:{width:"66%",height:"90%",margin:"-50px 0px -30px 8px"},attrs:{src:t.statusUrl,fit:"scale-down"}})],1),a("el-col",{attrs:{xs:12,sm:14,md:16,lg:16,xl:16}},[e.equipment?a("p",{staticClass:"el-dialog__title",staticStyle:{margin:"0px"}},[t._v(" "+t._s(e.equipment.name)+" "),a("span",{staticClass:"online-user-tips"},[t._v(" ("+t._s(e.equipment.onlineUser)+"人在线) ")]),2==e.equipment.useStatus?a("span",{staticClass:"disabled-tips"},[t._v(" -- 已禁用 ")]):t._e()]):t._e(),a("p",{staticClass:"el-dialog__title",staticStyle:{"margin-top":"7px","font-size":"15px"}},[t._v(t._s(e.equipment.remark))])])],1)],1),2!=e.equipment.useStatus?a("div",{staticClass:"btn"},[a("el-button",{attrs:{type:"text",icon:"el-icon-link",loading:t.remoteLoading},nativeOn:{click:function(a){return a.preventDefault(),t.remoteHandle(e)}}},[t._v("开始连接")]),a("el-button",{attrs:{type:"text",icon:"el-icon-share"},on:{click:function(a){return t.shareHandle(e)}}},[t._v("分享")]),a("el-button",{attrs:{type:"text",icon:"el-icon-view"},on:{click:function(a){return t.showShareDrawerHandle(e)}}},[t._v("查看分享")])],1):t._e()])],1)})),1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],attrs:{total:t.total,page:t.queryParams.page,"append-to-body":"",limit:t.queryParams.pageCount},on:{"update:page":function(e){return t.$set(t.queryParams,"page",e)},"update:limit":function(e){return t.$set(t.queryParams,"pageCount",e)},pagination:t.getList}})]],2),t.dcvHostShareDialogVisible?a("dcv-host-share-dialog",{ref:"dcvHostShareDialog"}):t._e(),t.dcvHostShareDrawerVisible?a("dcv-share-drawer",{ref:"dcvHostShareDrawer"}):t._e()],1)},i=[],n=a("5530"),s=a("3bb8"),o=a("45f0"),l=a("1fbf"),c={components:{DcvHostShareDialog:o["default"],DcvShareDrawer:l["default"]},props:{title:{type:String,default:""}},data:function(){return{loading:!1,tableList:[],listLoading:!1,remoteLoading:!1,queryParams:{page:1,pageCount:10},total:0,url:a("7408"),statusUrl:a("2ab5"),dcvHostShareDialogVisible:!1,dcvHostShareDrawerVisible:!1}},computed:{},created:function(){this.getList()},methods:{getList:function(){var t=this;this.listLoading=!0,Object(s["c"])(this.queryParams).then((function(e){t.listLoading=!1,t.tableList=e.data.records,t.total=e.data.total}))},shareHandle:function(t){var e=this;this.dcvHostShareDialogVisible=!0,this.$nextTick((function(){var a=Object(n["a"])({},t);delete a.id,e.$refs.dcvHostShareDialog.init(a)}))},showShareDrawerHandle:function(t){var e=this;this.dcvHostShareDrawerVisible=!0,this.$nextTick((function(){var a=Object(n["a"])({},t);console.log(a),e.$refs.dcvHostShareDrawer.init(a)}))},remoteHandle:function(t){var e=this;this.remoteLoading=!0,Object(s["d"])(t.id).then((function(t){e.remoteLoading=!1,window.open(t.data),console.log("open",t.data)})).catch((function(t){console.log(t),e.remoteLoading=!1}))}}},u=c,d=(a("338a"),a("2877")),m=Object(d["a"])(u,r,i,!1,null,"c0ec9066",null);e["default"]=m.exports},"1fbf":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-drawer",{attrs:{title:"分享记录 - "+t.dcvEquipmentName,size:"50%",visible:t.drawer,"with-header":!0,"append-to-body":!0,"custom-class":"share-drawer","before-close":t.handleClose},on:{"update:visible":function(e){t.drawer=e}}},[a("div",{staticClass:"content"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"multipleTable",attrs:{border:!1,data:t.tableData,"element-loading-text":"加载中...",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"shareAuthority",label:"权限","show-overflow-tooltip":!0,"min-width":"160px"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(t.formatShareAuth(a.shareAuthority))+" ")]}}])}),a("el-table-column",{attrs:{prop:"username",label:"接收用户"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(a.shareBy.username)+" ")]}}])}),a("el-table-column",{attrs:{prop:"shareTime",label:"开始时间","min-width":"150px"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(JSON.parse(a.shareTime).beginTime)+" ")]}}])}),a("el-table-column",{attrs:{prop:"shareTime",label:"终止时间","min-width":"150px"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(JSON.parse(a.shareTime).endTime)+" ")]}}])}),a("el-table-column",{attrs:{prop:"status",label:"可用状态"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[1==r.status?a("el-tag",{attrs:{type:"success"}},[t._v("正常")]):t._e(),2==r.status?a("el-tag",{attrs:{type:"danger"}},[t._v("禁用")]):t._e()]}}])}),a("el-table-column",{attrs:{label:"操作",fixed:"right",align:"center","min-width":"130"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.handleUpdate(r)}}},[t._v("修改分享")]),a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.handleDelete(r)}}},[t._v("取消分享")])]}}])})],1)],1)]),t.dcvHostShareDialogVisible?a("dcv-host-share-dialog",{ref:"dcvHostShareDialog",on:{refreshDataList:t.getList}}):t._e()],1)},i=[],n=a("5530"),s=(a("4ec9"),a("d3b7"),a("3ca3"),a("ddb0"),a("b0c0"),a("ac1f"),a("1276"),a("159b"),a("a15b"),a("7eb6")),o=a("c0c7"),l=a("45f0"),c={components:{DcvHostShareDialog:l["default"]},data:function(){return{drawer:!1,listLoading:!1,tableData:[],dcvEquipmentId:void 0,dcvEquipmentName:void 0,shareAuth:{},dcvHostShareDialogVisible:!1,userMap:new Map}},created:function(){this.getShareAuth()},methods:{init:function(t){this.dcvEquipmentId=t.dcvEquipmentId,this.dcvEquipmentName=t.equipment.name,this.drawer=!0,this.getList()},getList:function(){var t=this;this.listLoading=!0,Object(s["c"])(this.dcvEquipmentId).then((function(e){t.tableData=e.data,t.listLoading=!1}))},handleClose:function(t){t(),this.tableData=[]},getShareAuth:function(){var t=this;Object(s["b"])().then((function(e){t.shareAuth=e.data}))},formatShareAuth:function(t){var e=this,a=t.split(" "),r=[];return a.forEach((function(t){var a=e.shareAuth[t];a&&r.push(a)})),r.join(", ")},getUsernameById:function(t,e){var a=this,r=this.userMap.get(t);r?this.tableData[e].username=r.username:Object(o["e"])(t).then((function(r){a.tableData[e].username=r.data.username,a.userMap.set(t,r.data)}))},handleUpdate:function(t){var e=this;this.dcvHostShareDialogVisible=!0,this.$nextTick((function(){var a=Object(n["a"])({},t);e.$refs.dcvHostShareDialog.init(a)}))},handleDelete:function(t){var e=this,a=t.id;this.$confirm("是否确认取消分享?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["f"])({shareId:a})})).then((function(t){e.$message({type:"success",message:t.msg}),e.getList()}))}}},u=c,d=(a("d3fa"),a("2877")),m=Object(d["a"])(u,r,i,!1,null,"bf7f8952",null);e["default"]=m.exports},"2ab5":function(t,e,a){t.exports=a.p+"static/img/green-tag.32ac41a2.png"},"338a":function(t,e,a){"use strict";a("91f7")},"3a70":function(t,e,a){},"3b1e":function(t,e,a){"use strict";a("3a70")},"3bb8":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"a",(function(){return n})),a.d(e,"e",(function(){return s})),a.d(e,"c",(function(){return o})),a.d(e,"d",(function(){return l}));var r=a("b775");function i(t,e){return Object(r["a"])({url:"/dcv/distribute/distribute/".concat(t),method:"post",data:e})}function n(t){return Object(r["a"])({url:"/dcv/distribute/dellocate/".concat(t),method:"delete"})}function s(t){return Object(r["a"])({url:"/dcv/distribute/equipment/".concat(t),method:"get"})}function o(t){return Object(r["a"])({url:"/dcv/distribute/self/page",method:"get",params:t})}function l(t){return Object(r["a"])({url:"/dcv/distribute/uri/".concat(t),method:"get"})}},"42e9":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-link",{attrs:{to:"/clientdownload"}},[t._v("客户端下载")])},i=[],n={},s=n,o=a("2877"),l=Object(o["a"])(s,r,i,!1,null,"8a7b9c80",null);e["default"]=l.exports},"45f0":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.form.id?"修改分享":"添加分享","close-on-click-modal":!1,visible:t.visible,"append-to-body":"",width:"600px"},on:{"update:visible":function(e){t.visible=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"85px"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitForm()}}},[a("el-form-item",{attrs:{label:"分享权限",prop:"shareAuthority"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",width:"100%",multiple:"",placeholder:"请选择分享权限"},model:{value:t.form.shareAuthority,callback:function(e){t.$set(t.form,"shareAuthority",e)},expression:"form.shareAuthority"}},t._l(t.shareAuth,(function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})})),1)],1),t.form.id?t._e():a("el-form-item",{attrs:{label:"分享用户",prop:"userId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入关键词选择用户","remote-method":t.remoteLoadUser,loading:t.userLoading},model:{value:t.form.userId,callback:function(e){t.$set(t.form,"userId",e)},expression:"form.userId"}},t._l(t.userOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.username,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"分享时间",prop:"shareTime"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.form.shareTime,callback:function(e){t.$set(t.form,"shareTime",e)},expression:"form.shareTime"}})],1),a("el-form-item",{attrs:{label:"是否可用",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[a("el-option",{attrs:{label:"正常",value:1}}),a("el-option",{attrs:{label:"禁用",value:2}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确 定")]),a("el-button",{on:{click:t.cancel}},[t._v("取 消")])],1)],1)},i=[],n=a("1da1"),s=a("5530"),o=(a("96cf"),a("ac1f"),a("1276"),a("a15b"),a("e9c4"),a("7eb6")),l=a("c0c7"),c=a("2f62"),u={data:function(){return{visible:!1,shareAuth:{},form:{},rules:{id:[{required:!0,message:"ID不能为空",trigger:"blur"}],userId:[{required:!0,message:"请选择用户",trigger:"change"}],shareAuthority:[{required:!0,message:"请选择权限",trigger:"change"}],shareTime:[{required:!0,message:"分享时间不能为空",trigger:"blur"}],shareTimeFormat:[{required:!0,message:"时间格式不能为空",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]},userLoading:!1,userOptions:[]}},computed:Object(s["a"])({},Object(c["c"])({deptInfo:function(t){return t.dept.deptInfo}})),created:function(){this.getShareAuth()},methods:{init:function(t){if(this.reset(),console.log(t),this.form.shareTimeFormat=1,t.id){this.form=Object(s["a"])({},t),this.form.shareAuthority=t.shareAuthority.split(" ");var e=JSON.parse(t.shareTime);this.form.shareTime=[e.beginTime,e.endTime]}else{if(!t.dcvEquipmentId)return this.$message.error("请选择分享设备");this.form.dcvEquipmentId=t.dcvEquipmentId}this.visible=!0},getShareAuth:function(){var t=this;Object(o["b"])().then((function(e){t.shareAuth=e.data}))},remoteLoadUser:function(t){var e,a=this;""!==t?(this.userLoading=!0,Object(l["f"])({page:1,pageCount:30,username:t,deptId:(null===(e=this.deptInfo)||void 0===e?void 0:e.id)||""}).then(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a.userLoading=!1,a.userOptions=e.data.records;case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())):this.userOptions=[]},submitForm:function(){var t=this;this.$refs["form"].validate((function(e){if(e){var a=Object(s["a"])({},t.form);a.shareAuthority=a.shareAuthority.join(" "),a.shareTime=JSON.stringify({beginTime:a.shareTime[0],endTime:a.shareTime[1]}),console.log(a),t.form.id&&void 0!==t.form.id?Object(o["g"])(a).then((function(e){t.visible=!1,t.$message({type:"success",message:e.msg}),t.$emit("refreshDataList")})):Object(o["a"])(a).then((function(e){t.visible=!1,t.$message({type:"success",message:e.msg}),t.$emit("refreshDataList")}))}}))},cancel:function(){this.visible=!1,this.reset()},reset:function(){this.form={},this.resetForm("form")}}},d=u,m=(a("ea18"),a("2877")),h=Object(m["a"])(d,r,i,!1,null,"3e2df2a0",null);e["default"]=h.exports},4861:function(t,e,a){t.exports=a.p+"static/img/computer.5f9ac72d.png"},7408:function(t,e,a){t.exports=a.p+"static/img/dcv-computer.d135bf16.png"},7469:function(t,e,a){"use strict";a("da3e")},"788c":function(t,e,a){"use strict";a("076e")},"7eb6":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"a",(function(){return n})),a.d(e,"g",(function(){return s})),a.d(e,"f",(function(){return o})),a.d(e,"c",(function(){return l})),a.d(e,"d",(function(){return c})),a.d(e,"e",(function(){return u}));var r=a("b775");function i(){return Object(r["a"])({url:"/dcv/share/auth",method:"get"})}function n(t){return Object(r["a"])({url:"/dcv/share",method:"post",data:t})}function s(t){return Object(r["a"])({url:"/dcv/share",method:"put",data:t})}function o(t){return Object(r["a"])({url:"/dcv/share/unshare",method:"delete",params:t})}function l(t){return Object(r["a"])({url:"/dcv/share/curr/user/share/".concat(t),method:"get"})}function c(t){return Object(r["a"])({url:"/dcv/share/self/page",method:"get",params:t})}function u(t){return Object(r["a"])({url:"/dcv/share/uri/".concat(t),method:"get"})}},"8d93":function(t,e,a){},"91f7":function(t,e,a){},9406:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-tabs",{model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"远程主机",lazy:"",name:"remote-host"}},[a("remote-host",{attrs:{title:"远程主机"}})],1),a("el-tab-pane",{attrs:{label:"DCV 主机",lazy:"",name:"dcv-host"}},[a("dcv-host",{attrs:{title:"DCV 主机"}})],1),a("el-tab-pane",{attrs:{label:"被分享的DCV主机",lazy:"",name:"shared-dcv-host"}},[a("shared-dcv-host",{attrs:{title:"被分享的DCV主机"}})],1)],1)],1)},i=[],n=a("1d25"),s=a("95a3"),o=a("14af"),l={components:{RemoteHost:s["default"],DcvHost:n["default"],SharedDcvHost:o["default"]},data:function(){return{activeTab:"remote-host"}},computed:{},created:function(){},methods:{}},c=l,u=(a("7469"),a("2877")),d=Object(u["a"])(c,r,i,!1,null,"6c443220",null);e["default"]=d.exports},"95a3":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{"min-height":"400px"}},[a("div",{attrs:{slot:"header"},slot:"header"},[t._v(" "+t._s(t.title)+" "),a("div",{staticClass:"desktop",staticStyle:{float:"right"}},[a("downLoad-client")],1)]),0==t.total?a("div",{staticClass:"el-dialog__title",staticStyle:{"text-align":"center","line-height":"300px"}},[t._v("没有可以连接的远程桌面")]):[a("el-row",{attrs:{gutter:10}},t._l(t.tableList,(function(e,r){return a("el-col",{key:r,attrs:{xs:24,sm:12,md:12,lg:8,xl:6}},[a("el-card",{staticClass:"box-card",staticStyle:{"margin-bottom":"10px",border:"0px"},attrs:{shadow:"hover","body-style":{padding:"0px 20px",textAlign:"right"}}},[a("div",{staticClass:"clearfix",staticStyle:{position:"relative"},attrs:{slot:"header"},slot:"header"},[a("el-row",[a("el-col",{attrs:{xs:12,sm:10,md:8,lg:8,xl:8}},[a("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.url,fit:"fill"}}),a("div"),a("el-image",{staticStyle:{width:"66%",height:"90%",margin:"-50px 0px -30px 8px"},attrs:{src:t.statusUrl,fit:"scale-down"}})],1),a("el-col",{attrs:{xs:12,sm:14,md:16,lg:16,xl:16}},[a("p"),e.equipment?a("p",{staticClass:"el-dialog__title",staticStyle:{margin:"0px"}},[t._v(t._s(e.equipment.name))]):t._e(),a("p"),a("p",{staticClass:"el-dialog__title",staticStyle:{margin:"0px"}},[t._v(t._s(e.username))])])],1)],1),t._e()])],1)})),1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],attrs:{total:t.total,page:t.queryParams.page,"append-to-body":"",limit:t.queryParams.pageCount},on:{"update:page":function(e){return t.$set(t.queryParams,"page",e)},"update:limit":function(e){return t.$set(t.queryParams,"pageCount",e)},pagination:t.getList}})]],2)],1)},i=[],n=a("1da1"),s=(a("96cf"),a("b0c0"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),a("99af"),a("b775"));function o(t){return Object(s["a"])({url:"/rdm/user/connect/equipment/user/self/page",method:"get",params:t})}function l(t){return Object(s["a"])({url:"/rdp/connect/".concat(t),method:"get"})}function c(t,e){return Object(s["a"])({url:"/rdm/file/download/".concat(t,"/").concat(e),method:"get"})}var u=a("42e9"),d={components:{DownLoadClient:u["default"]},props:{title:{type:String,default:""}},data:function(){return{remoteLoading:!1,clientDesktopUrl:window._URL_.WINDOW_EXE_PATH,tableList:[],listLoading:!1,queryParams:{page:1,pageCount:10},total:0,url:a("4861"),statusUrl:a("2ab5")}},computed:{},created:function(){this.getList()},methods:{getList:function(){var t=this;this.listLoading=!0,o(this.queryParams).then((function(e){t.listLoading=!1,t.tableList=e.data.records,t.total=e.data.total}))},downloadHandle:function(t){return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:c(t.id,"bat").then((function(e){var a=new Blob([e],{type:"text/bath;charset=utf8"}),r=t.equipment.name+"-"+t.username+".bat",i=document.createElement("a");i.download=r,i.style.display="none",i.href=URL.createObjectURL(a),document.body.appendChild(i),i.click(),URL.revokeObjectURL(i.href),document.body.removeChild(i)}));case 1:case"end":return e.stop()}}),e)})))()},rdpRemoteHandle:function(t){var e=this;this.remoteLoading=!0,l(t.id).then((function(t){console.log(t.data),e.remoteLoading=!1,window.open("/static/index.html?serverId=".concat(t.data.serverId,"&accountId=").concat(t.data.accountId))})).catch((function(t){console.log(t),e.remoteLoading=!1}))}}},m=d,h=(a("788c"),a("2877")),p=Object(h["a"])(m,r,i,!1,null,"71122060",null);e["default"]=p.exports},c0c7:function(t,e,a){"use strict";a.d(e,"f",(function(){return i})),a.d(e,"e",(function(){return n})),a.d(e,"a",(function(){return s})),a.d(e,"h",(function(){return o})),a.d(e,"g",(function(){return l})),a.d(e,"c",(function(){return c})),a.d(e,"d",(function(){return u})),a.d(e,"b",(function(){return d}));var r=a("b775");function i(t){return Object(r["a"])({url:"/sys/user",method:"get",params:t})}function n(t){return Object(r["a"])({url:"/sys/user/".concat(t),method:"get"})}function s(t){return Object(r["a"])({url:"/sys/user",method:"post",data:t})}function o(t){return console.log(t,"data----更新"),Object(r["a"])({url:"/sys/user",method:"put",data:t})}function l(t){return Object(r["a"])({url:"/sys/user/resetPassword",method:"put",data:t})}function c(t){return Object(r["a"])({url:"/sys/user",method:"delete",data:t})}function u(t,e){return Object(r["a"])({url:"/sys/user/role/".concat(t),method:"post",data:e})}function d(t){return Object(r["a"])({url:"/sys/user/allotUserDept",method:"post",data:t})}},d3fa:function(t,e,a){"use strict";a("8d93")},da3e:function(t,e,a){},ea18:function(t,e,a){"use strict";a("1618")}}]);