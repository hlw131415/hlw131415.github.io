(window.webpackJsonp=window.webpackJsonp||[]).push([[25,116,117],{"3MUW":function(e,t,i){},"70vL":function(e,t,i){"use strict";i("epFf")},"7BoM":function(e,t,i){"use strict";i("wZnM")},L0ne:function(e,t,i){"use strict";i.r(t);var a={name:"config",props:{showNow:{type:Array,default:function(){return[]}},configRight:{type:Boolean,default:!1}},data:function(){return{parentId:1,activeNames:[],dialogVisible:!1,editObj:{}}},computed:{},mounted:function(){console.log(this.showNow)},methods:{deleOne:function(e){var t=this;this.$confirm("确定删除？","确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){var i=[];i.push(e.guid),t.$request.deleConfig(i).then((function(i){t.$message({message:"删除成功!",type:"success"});var a=[];t.showNow.forEach((function(t,i){t!==e&&a.push(t)})),t.$emit("changeShowNow",a)}))})).catch((function(e){}))},editOne:function(e){this.$emit("openEdit",e)}}},n=(i("7BoM"),i("KHd+")),s=Object(n.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"editConfig"},[i("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},e._l(e.showNow,(function(t,a){return i("el-collapse-item",{key:a,attrs:{title:t.authName,name:t.guid}},[i("div",{staticClass:"buttons"},[e.configRight?i("div",{staticClass:"buttons"},[i("el-tag",{attrs:{type:"primary"},on:{click:function(i){return e.editOne(t)}}},[e._v("编辑功能权限")])],1):i("div",{staticClass:"buttons"},[i("el-tag",{attrs:{type:"primary"},on:{click:function(i){return e.editOne(t)}}},[e._v("编辑")]),e._v(" "),i("el-tag",{attrs:{type:"info"},on:{click:function(i){return e.deleOne(t)}}},[e._v("删除")])],1)]),e._v(" "),e._l(t.children,(function(t,a){return i("el-collapse-item",{key:a,attrs:{title:t.authName,name:t.guid}},[e.configRight?i("div",{staticClass:"buttons"},[i("el-tag",{attrs:{type:"primary"},on:{click:function(i){return e.editOne(t)}}},[e._v("编辑功能权限")])],1):i("div",{staticClass:"buttons"},[i("el-tag",{attrs:{type:"primary"},on:{click:function(i){return e.editOne(t)}}},[e._v("编辑")]),e._v(" "),i("el-tag",{attrs:{type:"info"},on:{click:function(i){return e.deleOne(t)}}},[e._v("删除")])],1)])}))],2)})),1)],1)}),[],!1,null,"d932732a",null);t.default=s.exports},epFf:function(e,t,i){},fUeD:function(e,t,i){},hrhV:function(e,t,i){"use strict";i.r(t);var a={name:"editConfig",props:{routeData:{type:Array,default:function(){return[]}},isNewAdd:{default:!0,type:Boolean},parentId:"",dialogVisible:{default:!1,type:Boolean},editObj:{type:Object,default:function(){return{}}},treeOptions:{type:Array,default:function(){return[]}}},data:function(){return{isPage:!1,componentPath:"",pID:this.parentId,delTree:this.changeTree(this.treeOptions),authType:1,visible:this.dialogVisible,authTypeOption:[{value:1,label:"菜单"},{value:2,label:"页面"},{value:3,label:"按钮"}]}},mounted:function(){this.isNewAdd&&this.formatObj(this.editObj),this.editObj.componentPath&&(this.componentPath=this.editObj.componentPath-0),this.editObj.parentId&&console.log(this.editObj.parentId)},methods:{changeType:function(e){this.isPage=2===e},changeTree:function(e){var t=[];!function e(i){return i.forEach((function(i,a){i.label=i.authName,i.value=i.guid,i.children&&i.children.length&&e(i.children),t.push(i)})),t}(e)},change:function(){},handleChange:function(e){console.log(e),console.log(this.editObj.parentId)},submitConfig:function(){var e=!0,t="";this.$isEmpty(this.editObj.authName)&&(e=!1,t="请输入名称"),2===this.editObj.authType&&this.$isEmpty(this.editObj.authPath)&&(e=!1,t="请输入路径"),e?this.ajaxConfig():this.$message({message:t})},ajaxConfig:function(){var e=this,t=this.editObj;t.parentId&&t.parentId.length&&"[object Array]"===Object.prototype.toString.call(t.parentId)&&(t.parentId=t.parentId[t.parentId.length-1]),t.parentId&&!t.parentId.length&&"[object Array]"===Object.prototype.toString.call(t.parentId)&&(t.parentId=""),t.componentPath=this.componentPath,2!==t.authType&&(t.componentPath="",t.authPath=""),console.log(t),this.isNewAdd?this.$request.newAddConfig(t).then((function(i){e.$emit("addNew",t),e.$message({message:i.desc,type:"success"}),e.closeCallback()})):this.$request.editConfig(t).then((function(i){e.$emit("editOne",t),e.$message({message:i.desc,type:"success"}),e.closeCallback()}))},closeCallback:function(){this.$emit("closeDialog")},formatObj:function(e){e.authType||this.$set(this.editObj,"authType",1),e.name?this.$set(this.editObj,"name",""):this.$set(this.editObj,"name",e.cnName),this.$set(this.editObj,"parentId",this.parentId),e.hasOwnProperty("authType")||this.$set(this.editObj,"authType",1),e.hasOwnProperty("isVisible")||this.$set(this.editObj,"isVisible",!0),e.hasOwnProperty("isVerify")||this.$set(this.editObj,"isVerify",!0),e.authTitle?this.$set(this.editObj,"authTitle",""):this.$set(this.editObj,"authTitle",e.cnName),e.authPath?this.$set(this.editObj,"authPath",""):this.$set(this.editObj,"authPath",e.path),this.$set(this.editObj,"authName",""),this.$set(this.editObj,"guid","")}}},n=(i("pAAp"),i("KHd+")),s=Object(n.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{staticStyle:{"text-indent":"0"},attrs:{title:e.isNewAdd?"添加功能模块":"编辑功能模块",inline:"true",width:"700px",visible:e.visible,"destroy-on-close":""},on:{"update:visible":function(t){e.visible=t},close:e.closeCallback}},[i("div",{staticClass:"editwrap"},[i("el-form",{attrs:{"label-position":"right",size:"small","label-width":"110px"}},[e.editObj.guid?i("el-form-item",{attrs:{label:"ID:"}},[i("el-input",{attrs:{disabled:"",size:"small"},model:{value:e.editObj.guid,callback:function(t){e.$set(e.editObj,"guid",t)},expression:"editObj.guid"}}),e._v(" "),i("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{size:"small"},model:{value:e.editObj.guid,callback:function(t){e.$set(e.editObj,"guid",t)},expression:"editObj.guid"}})],1):e._e(),e._v(" "),i("el-form-item",{attrs:{label:"名称:"}},[i("el-input",{attrs:{size:"small"},model:{value:e.editObj.authName,callback:function(t){e.$set(e.editObj,"authName",t)},expression:"editObj.authName"}})],1),e._v(" "),e.editObj.authType&&1!==e.editObj.authType?i("el-form-item",{attrs:{label:"URL路径:"}},[i("el-input",{attrs:{size:"small"},model:{value:e.editObj.authPath,callback:function(t){e.$set(e.editObj,"authPath",t)},expression:"editObj.authPath"}})],1):e._e(),e._v(" "),i("el-form-item",{attrs:{label:"上级菜单:"}},[i("el-cascader",{attrs:{options:e.treeOptions,props:{checkStrictly:!0},clearable:""},on:{change:e.handleChange},model:{value:e.editObj.parentId,callback:function(t){e.$set(e.editObj,"parentId",t)},expression:"editObj.parentId"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"是否可见:"}},[i("el-switch",{model:{value:e.editObj.isVisible,callback:function(t){e.$set(e.editObj,"isVisible",t)},expression:"editObj.isVisible"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"是否需要鉴权:"}},[i("el-switch",{model:{value:e.editObj.isVerify,callback:function(t){e.$set(e.editObj,"isVerify",t)},expression:"editObj.isVerify"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"btn"},[i("el-button",{attrs:{type:"primary"},on:{click:e.submitConfig}},[e._v(e._s(e.isNewAdd?"添加":"提交"))])],1)])}),[],!1,null,"3c2598d3",null);t.default=s.exports},mYOq:function(e){e.exports=JSON.parse('[{"componentPath":"/systemManage/areaManage/index","name":"区域管理","children":[{"authName":"新增场站","authPath":"addNew","authType":3,"isVerify":true,"isVisible":true},{"authName":"删除","authPath":"delete","authType":3,"isVerify":true,"isVisible":true},{"authName":"编辑","authPath":"edit","authType":3,"isVerify":true,"isVisible":true}]},{"componentPath":"/systemManage/channelManage/index","name":"通道管理","children":[{"authName":"添加通道","authPath":"addChannel","authType":3,"isVerify":true,"isVisible":true},{"authName":"查看通道","authPath":"lookChannel","authType":3,"isVerify":true,"isVisible":true},{"authName":"编辑通道","authPath":"editChannel","authType":3,"isVerify":true,"isVisible":true},{"authName":"删除通道","authPath":"deleteChannel","authType":3,"isVerify":true,"isVisible":true}]},{"componentPath":"/systemManage/userManage/index","name":"用户管理","children":[{"authName":"添加用户","authPath":"addUser","authType":3,"isVerify":true,"special":false,"isVisible":true},{"authName":"查看","authPath":"lookUser","special":false,"authType":3,"isVerify":true,"isVisible":true},{"authName":"编辑","authPath":"editUser","special":false,"authType":3,"isVerify":true,"isVisible":true},{"authName":"重置密码","authPath":"resetPassword","special":false,"authType":3,"isVerify":true,"isVisible":true},{"authName":"锁定用户","authPath":"lockUser","special":false,"authType":3,"isVerify":true,"isVisible":true},{"authName":"删除","authPath":"deleteUser","special":false,"authType":3,"isVerify":true,"isVisible":true}]},{"componentPath":"/systemManage/funConfig/index","name":"功能模块配置","children":[{"authName":"更新功能模块","special":false,"authPath":"updateConfig","authType":3,"isVerify":true,"isVisible":true}]},{"componentPath":"/systemManage/authConfig/index","name":"功能权限配置","children":[{"authName":"配置权限","special":false,"authPath":"diyConfig","authType":3,"isVerify":true,"isVisible":true}]},{"componentPath":"/systemManage/roleConfig/index","name":"角色管理","children":[{"authName":"添加角色","authPath":"addRole","special":false,"authType":3,"isVerify":true,"isVisible":true},{"authName":"查看角色","authPath":"lookRole","authType":3,"isVerify":true,"special":false,"isVisible":true},{"authName":"编辑角色","authPath":"editRole","authType":3,"isVerify":true,"special":false,"isVisible":true},{"authName":"删除角色","authPath":"deleteRole","authType":3,"special":false,"isVerify":true,"isVisible":true}]},{"componentPath":"/systemManage/onlineUserManage/index","name":"在线用户管理","children":[{"authName":"强制下线","authPath":"forceOffline","authType":3,"isVerify":true,"isVisible":true}]},{"componentPath":"/systemManual/manualManage/index","name":"人工补采","children":[{"authName":"编辑","authPath":"edit","authType":3,"isVerify":true,"isVisible":true},{"authName":"查看","authPath":"look","authType":3,"isVerify":true,"isVisible":true},{"authName":"删除","authPath":"delete","authType":3,"isVerify":true,"isVisible":true},{"authName":"添加","authPath":"add","authType":3,"isVerify":true,"isVisible":true}]},{"componentPath":"/systemManual/manualEmergency/index","name":"人工应急","children":[{"authName":"查看","authPath":"look","authType":3,"isVerify":true,"isVisible":true}]},{"componentPath":"/systemManual/alarmHistory/index","name":"报警历史","children":[{"authName":"编辑","authPath":"edit","authType":3,"isVerify":true,"isVisible":true}]},{"componentPath":"/systemManual/runtimeConfigManage/index","name":"参数配置","children":[{"authName":"查看参数","authPath":"look","authType":3,"isVerify":true,"special":false,"isVisible":true},{"authName":"编辑参数","authPath":"edit","special":false,"authType":3,"isVerify":true,"isVisible":true}]},{"componentPath":"/systemManual/nameManage/index","name":"字典管理","children":[{"authName":"添加字典","authPath":"addName","authType":3,"isVerify":true,"special":false,"isVisible":true},{"authName":"查看字典","authPath":"lookName","special":false,"authType":3,"isVerify":true,"isVisible":true},{"authName":"编辑字典","authPath":"editName","special":false,"authType":3,"isVerify":true,"isVisible":true},{"authName":"删除字典","authPath":"deleteName","special":false,"authType":3,"isVerify":true,"isVisible":true}]},{"componentPath":"/systemManual/cameraManage/index","name":"监控相机管理","children":[{"authName":"编辑","authPath":"edit","authType":3,"isVerify":true,"isVisible":true},{"authName":"查看","authPath":"look","authType":3,"isVerify":true,"isVisible":true},{"authName":"删除","authPath":"delete","authType":3,"isVerify":true,"isVisible":true},{"authName":"添加","authPath":"add","authType":3,"isVerify":true,"isVisible":true}]},{"componentPath":"/systemManual/manageRule/index","name":"业务时序管理","children":[{"authName":"编辑","authPath":"edit","authType":3,"isVerify":true,"isVisible":true},{"authName":"查看","authPath":"look","authType":3,"isVerify":true,"isVisible":true},{"authName":"删除","authPath":"delete","authType":3,"isVerify":true,"isVisible":true},{"authName":"添加","authPath":"add","authType":3,"isVerify":true,"isVisible":true}]},{"componentPath":"/systemManual/remoteChannel/index","name":"远程通道管理","children":[{"authName":"编辑","authPath":"edit","authType":3,"isVerify":true,"isVisible":true},{"authName":"版本管理","authPath":"versionControl","authType":3,"isVerify":true,"isVisible":true},{"authName":"远程升级","authPath":"update","authType":3,"isVerify":true,"isVisible":true}]},{"componentPath":"/systemManual/message/index","name":"通讯报文查询","children":[{"authName":"查看详情","authPath":"look","authType":3,"isVerify":true,"isVisible":true}]},{"componentPath":"/systemManual/sysHistory/index","name":"操作日志查询","children":[{"authName":"查看详情","authPath":"look","authType":3,"isVerify":true,"isVisible":true}]},{"componentPath":"/query/channelRecord/index","name":"通道记录统计","children":[{"authName":"查看","authPath":"look","authType":3,"isVerify":true,"isVisible":true}]},{"componentPath":"/query/roadRecordManage/index","name":"通行记录查询","children":[{"authName":"查看","authPath":"look","authType":3,"isVerify":true,"isVisible":true}]},{"componentPath":"/query/entryExit/index","name":"出入境记录统计","children":[{"authName":"下载excel","authPath":"download","authType":3,"isVerify":true,"isVisible":true}]},{"componentPath":"/query/channelStatistics/index","name":"通道记录统计","children":[{"authName":"下载excel","authPath":"download","authType":3,"isVerify":true,"isVisible":true}]},{"componentPath":"/query/delayCarStatistics/index","name":"滞留车辆统计","children":[{"authName":"下载excel","authPath":"download","authType":3,"isVerify":true,"isVisible":true}]},{"componentPath":"/query/platformLog/index","name":"运行日志查询","children":[{"authName":"下载","authPath":"download","authType":3,"isVerify":true,"isVisible":true}]},{"componentPath":"/monitor/watchChannel/index","name":"通道实时监控","children":[{"authName":"查看","authPath":"look","authType":3,"isVerify":true,"isVisible":true}]},{"componentPath":"/monitor/watchEquipment/index","name":"设备实时监控","children":[{"authName":"操作","authPath":"edit","authType":3,"isVerify":true,"isVisible":true}]},{"componentPath":"/monitor/hengqin/index","name":"通道实时验放","children":[{"authName":"退车","authPath":"back","authType":3,"isVerify":true,"isVisible":true},{"authName":"开闸","authPath":"openDoor","authType":3,"isVerify":true,"isVisible":true},{"authName":"人工纠正","authPath":"redirect","authType":3,"isVerify":true,"isVisible":true}]}]')},owYd:function(e,t,i){"use strict";i("3MUW")},pAAp:function(e,t,i){"use strict";i("fUeD")},wTxn:function(e,t,i){"use strict";i.r(t);var a=i("GQeE"),n=i.n(a),s=i("gDS+"),l=i.n(s),u=i("hrhV"),r=i("L0ne"),h=i("1a7R"),o=i("mYOq"),c={name:"funConfig",data:function(){return{allFace:[],firstArr:[],showNow:[],isNewAdd:!0,selectAuthType:"",allPage:[],dialogVisible:!1,editObj:{},parentId:"",routDatas:[],expand:[]}},mounted:function(){this.getAllConfig()},methods:{openUpload:function(){var e=this;console.log(o),console.log(h),this.$confirm("确定更新功能模块？","确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"取消",center:!0}).then((function(){var t=e.copySimple(h);!function e(t,i){for(var a=0;a<t.length;a++)if(t[a].independence){t[a].children=[];for(var n=0;n<i.length;n++){i[n].componentPath===t[a].componentPath&&(t[a].children=i[n].children)}}else if(t[a].children)for(var s=0;s<i.length;s++){var l=i[s].componentPath;2===t[a].authType&&l===t[a].componentPath?t[a].children=i[s].children:t[a].children&&t[a].children.length&&e(t[a].children,i)}else t[a].children=[]}(t,o),console.log(t),e.$request.pushConfig(l()(t)).then((function(t){e.$message({type:"success",message:"更新成功！"}),setTimeout((function(){e.getAllConfig(),e.$request.editAdminAuth()}),300)}))})).catch((function(e){}))},delRoute:function(e){var t=[];return e.forEach((function(e,i){var a={};a.label=e.name,a.value=e.seqNo,t.push(a)})),t},changeNow:function(e){this.parentId=e.guid,this.selectAuthType=e.authType,console.log(e.guid)},clickOne:function(e,t,i){console.log(e)},getKey:function(e,t){return console.log(e),e[t].guid},deleOne:function(e){var t=this;this.$confirm("确定删除？","确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){t.$request.deleConfig([e.guid]).then((function(i){t.$message({message:"删除成功!",type:"success"}),t.delAction(t.allPage,e)}))})).catch((function(e){}))},delAction:function(e,t){var i=this;e.forEach((function(a,n){a.guid===t.guid?e.splice(n,1):a.children&&a.children.length&&i.delAction(a.children,t)}))},editOne:function(e){this.getAllConfig()},editAction:function(e){var t=e.indexNow;console.log(t)},changeShowNow:function(e){this.showNow=e},getAllConfig:function(){var e=this;this.$request.getAllConfig().then((function(t){e.allPage=t.data,e.allPage.length&&e.getExpand(e.allPage)}))},getExpand:function(e){var t=[];!function e(i){i.forEach((function(i,a){3!==i.authType?t.push(i.guid):i.children&&i.children.length&&e(i.children)}))}(e),console.log(t),this.expand=t},addNew:function(e){this.getAllConfig()},add2:function(e,t){var i=this;e.forEach((function(a,n){a.guid===t.parentId?e.splice(n,0,t):a.children&&a.children.length&&i.add2(a.children,t)}))},changeData:function(e){for(var t=0;t<this.allPage.length;t++)if(e===this.allPage[t])if(this.allPage[t].children)this.allPage[t].children.push(e);else{var i=[];i.push(e),this.allPage[t].children=i}else this.allPage[t].children&&this.allPage[t].children.length&&this.changeData(this.allPage[t].children)},addConfig:function(){this.editObj={},this.isNewAdd=!0,this.dialogVisible=!0},openEdit:function(e){console.log(e),this.isNewAdd=!1,this.editObj=e,this.parentId=e.parentId,this.dialogVisible=!0},closeDialog:function(){this.dialogVisible=!1},getAllInterface:function(){var e=this;this.$request.getAllInterface().then((function(t){e.allFace=t.data;var i=[];for(var a in t.data)a.notAllow||i.push(a);e.firstArr=i,e.showNow=e.allFace[i[0]]}))},getkey:function(e){return console.log(e),n()(e)[0]}},components:{Config:r.default,EditConfig:u.default}},d=(i("70vL"),i("owYd"),i("KHd+")),p=Object(d.a)(c,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"temp1223"},[i("div",{staticClass:"btns",staticStyle:{margin:"4px 0 16px"}},[i("div",{staticClass:"uploadOne"},[i("el-button",{directives:[{name:"stat",rawName:"v-stat",value:"updateConfig",expression:"'updateConfig'"}],attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:e.openUpload}},[e._v("更新功能模块")])],1)]),e._v(" "),i("div",{},[i("div",{staticClass:"dataTable"},[i("el-table",{ref:"tableAutoMaxHeight",staticStyle:{"margin-bottom":"20px"},attrs:{stripe:"","highlight-current-row":"","max-height":e.tableMaxHeight,size:"small",data:e.allPage,align:"left","row-key":"guid",border:"","expand-row-keys":e.expand,"tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"current-change":e.changeNow}},[i("el-table-column",{attrs:{align:"left",prop:"authName",label:"名称",sortable:""}}),e._v(" "),i("el-table-column",{attrs:{align:"center",prop:"authPath",sortable:"",label:"URL路径"},scopedSlots:e._u([{key:"default",fn:function(t){return[1!==t.row.authType?i("span",[e._v(e._s(t.row.authPath))]):e._e()]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",prop:"componentPath",sortable:"",width:"320",label:"组件路径"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",prop:"authType",label:"类型",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(1===t.row.authType?"菜单":2===t.row.authType?"页面":"按钮")+"\n                  ")]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",prop:"isVisible",label:"是否可见",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[i("Tag",{attrs:{type:t.row.isVisible?"success":"danger"}},[e._v(e._s(t.row.isVisible?"可见":"不可见"))])]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",prop:"isVerify",sortable:"",label:"是否需要鉴权"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("Tag",{attrs:{type:t.row.isVerify?"success":"danger"}},[e._v(e._s(t.row.isVerify?"需要鉴权":"不需鉴权"))])]}}])})],1)],1)]),e._v(" "),e.dialogVisible?i("EditConfig",{attrs:{treeOptions:e.allPage,parentId:e.parentId,isNewAdd:e.isNewAdd,editObj:e.editObj,routeData:e.routDatas,dialogVisible:e.dialogVisible},on:{editOne:e.editOne,addNew:e.addNew,closeDialog:e.closeDialog}}):e._e()],1)}),[],!1,null,"6bfda6c1",null);t.default=p.exports},wZnM:function(e,t,i){}}]);