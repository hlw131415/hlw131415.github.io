(window.webpackJsonp=window.webpackJsonp||[]).push([[35,96,111],{"/2K1":function(e,t,a){},"50Yb":function(e,t,a){"use strict";a.r(t);var l=a("GQeE"),i=a.n(l),n=a("gDS+"),r=a.n(n),o=a("RTSS"),s=a("pvxR"),c={name:"areaConfig",data:function(){return{allFace:[],firstArr:[],showNow:[],showArea:{},allPage:[],input1:{},isDisabled:!1,dialogVisible:!1,editObj:{},parentId:"",arrTree:[],pageSize:20,pageNow:1,pages:1,treeDisabled:!0,totalNum:1,areaSelected:{}}},mounted:function(){this.getAllConfig()},methods:{editArea:function(){this.getAllConfig()},handleEdit:function(e,t){console.log(t),this.areaSelected=this.copySimple(t),console.log(this.areaSelected),this.dialogVisible=!0},handleDelete:function(e,t){var a=this;this.$confirm("确定删除该区域？","确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){var e=[];e.push(t.guid),a.$request.deleteApartment(e).then((function(e){a.$message({message:"删除成功!",type:"success"}),a.delAction(a.allPage,t)}))})).catch((function(e){}))},delAction:function(e,t){var a=this;e.forEach((function(l,i){l.guid===t.guid?e.splice(i,1):l.children&&l.children.length&&a.delAction(l.children,t)}))},addAction:function(e){this.getAllConfig()},clearUp:function(){this.input1={}},searchAction:function(e){this.input1=e,this.pageNow=1,this.getAllConfig()},handleCurrentChange:function(e){this.pageNow=e,this.getAllConfig()},addNewRoom:function(){this.areaSelected={},this.dialogVisible=!0},changeNow:function(e){e.level-0==2?this.parentId=e.parentId:this.parentId=e.guid,console.log(e)},changeShowNow:function(e){this.showNow=e},getAllConfig:function(){var e=this;this.$request.getApartmentTree({data:this.input1,current:this.pageNow,size:this.pageSize}).then((function(t){e.allPage=t.data}))},editCallback:function(){this.dialogVisible=!1},addNew:function(e){var t=JSON.parse(r()(this.allPage)),a=e.parentId;!function e(t,l){for(var i=0;i<t.length;i++)if(a===t[i].guid)if(t[i].children)t[i].children.push(l);else{var n=[];n.push(l),t[i].children=n}else t[i].children&&t[i].children.length&&e(t[i].children,l)}(t,e),console.log(this.allPage),this.allPage=t},changeData:function(e){for(var t=0;t<this.allPage.length;t++)if(e===this.allPage[t])if(this.allPage[t].children)this.allPage[t].children.push(e);else{var a=[];a.push(e),this.allPage[t].children=a}else this.allPage[t].children&&this.allPage[t].children.length&&this.changeData(this.allPage[t].children)},addConfig:function(){this.dialogVisible=!0},openEdit:function(e){this.editObj=e,this.dialogVisible=!0},closeDialog:function(){this.dialogVisible=!1},clickOne:function(e,t){this.showNow=this.allPage[e.index].children?this.allPage[e.index].children:[],this.parentId=this.allPage[e.index].guid},getAllInterface:function(){var e=this;this.$request.getAllInterface().then((function(t){e.allFace=t.data;var a=[];for(var l in t.data)l.notAllow||a.push(l);e.firstArr=a,e.showNow=e.allFace[a[0]]}))},getkey:function(e){return i()(e)[0]}},components:{AddArea:o.default,SearchChannelTab:s.default}},d=(a("F+js"),a("KHd+")),u=Object(d.a)(c,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"btns",staticStyle:{margin:"4px 0 16px"}},[a("el-button",{directives:[{name:"stat",rawName:"v-stat",value:"addNew",expression:"'addNew'"}],attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:e.addNewRoom}},[e._v("新增")])],1),e._v(" "),a("div",{staticClass:"dataWrap"},[a("div",{staticClass:"dataTable"},[a("el-table",{attrs:{stripe:"","highlight-current-row":"",size:"small",data:e.allPage,"row-key":"guid",border:"","default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"current-change":e.changeNow}},[a("el-table-column",{attrs:{align:"left","header-align":"center",prop:"portName",label:"区域名称",sortable:"",width:"260"}}),e._v(" "),a("el-table-column",{attrs:{prop:"portCode",label:"区域代码",sortable:"",width:"260"}}),e._v(" "),e.$showColumn(["edit","delete"])?a("el-table-column",{attrs:{align:"center",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("Icon",{directives:[{name:"stat",rawName:"v-stat",value:"edit",expression:"'edit'"}],attrs:{icon:"icon-bianji",tip:"编辑"},nativeOn:{click:function(a){return e.handleEdit(t.$index,t.row)}}}),e._v(" "),a("Icon",{directives:[{name:"stat",rawName:"v-stat",value:"delete",expression:"'delete'"}],attrs:{icon:"icon-shanchu",tip:"删除"},nativeOn:{click:function(a){return e.handleDelete(t.$index,t.row)}}})]}}],null,!1,2020524315)}):e._e()],1)],1)]),e._v(" "),e.dialogVisible?a("AddArea",{attrs:{parentId:e.parentId,showArea:e.showArea,parentOptions:e.allPage,areaSelected:e.areaSelected,dialogVisible:e.dialogVisible},on:{editArea:e.editArea,addAction:e.addAction,editCallback:e.editCallback}}):e._e()],1)}),[],!1,null,"3d78ced5",null);t.default=u.exports},"7Rfz":function(e,t,a){"use strict";a("/2K1")},"F+js":function(e,t,a){"use strict";a("FcYC")},FMUp:function(e,t,a){},FcYC:function(e,t,a){},RTSS:function(e,t,a){"use strict";a.r(t);var l={name:"addArea",props:{areaSelected:{type:Object,default:function(){}},parentOptions:{type:Array,default:function(){return[]}},dialogVisible:{type:Boolean,default:!1},parentId:"",isNewAdd:{type:Boolean,default:!0},showArea:{type:Object,default:function(){}}},data:function(){return{noshowArae:!0,topId:"",pID:this.parentId,visible:this.dialogVisible,ruleForm2:this.areaSelected.portName?this.areaSelected:{portName:"",portCode:"",parentId:""},rules:{portName:this.$rules.validate("请输入区域名称",12),portCode:this.$rules.validate("请输入区域代码",8),parentId:this.$rules.validate("请选择所属区域")}}},mounted:function(){console.log(this.areaSelected),this.areaSelected.level-0==0&&(this.noshowArae=!1),!this.areaSelected.guid&&this.pID&&(this.ruleForm2.parentId=this.pID),this.changeTree(this.parentOptions)},methods:{changeSite:function(){var e=this;setTimeout((function(){e.$refs.cascaderHandle.dropDownVisible=!1}))},changeTree:function(e){var t=this,a=[];!function e(l){return l.forEach((function(l,i){l.label=l.portName,l.value=l.guid,l.level-0==2&&(l.disabled=!0),t.ruleForm2.guid&&t.ruleForm2.guid===l.guid&&(l.disabled=!0),!1===l.isChange&&(l.disabled=!0),l.children&&l.children.length&&e(l.children),a.push(l)})),a}(e)},closeCallback:function(){this.$emit("editCallback")},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(console.log(e),!e)return!1;t.doAction()}))},doAction:function(){var e=this,t=this.ruleForm2;t.parentId&&(t.parentId&&t.parentId.length&&"[object Array]"===Object.prototype.toString.call(t.parentId)&&(t.parentId=t.parentId[t.parentId.length-1]),t.parentId.length||"[object Array]"!==Object.prototype.toString.call(t.parentId)||(t.parentId="")),console.log(t),t.guid?this.$request.editApartment(t).then((function(t){e.$message({type:"success",message:t.data}),e.$emit("editArea"),e.closeCallback()})):this.$request.addApartment(t).then((function(t){e.$emit("addAction",e.ruleForm2),e.$message({type:"success",message:t.data}),e.closeCallback()}))},resetForm:function(e){this.$refs[e].resetFields()}}},i=(a("7Rfz"),a("KHd+")),n=Object(i.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{"close-on-click-modal":!e.ruleForm2.guid,width:"700px",visible:e.visible,"destroy-on-close":""},on:{"update:visible":function(t){e.visible=t},close:e.closeCallback}},[a("div",{staticClass:"dialogTitleDiy"},[e._v(e._s(e.ruleForm2.guid?"编辑区域":"添加区域"))]),e._v(" "),a("el-form",{ref:"ruleForm",staticClass:"addArea",attrs:{model:e.ruleForm2,"status-icon":"",rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"区域名称",prop:"portName"}},[a("el-input",{attrs:{placeholder:"请输入区域名称"},model:{value:e.ruleForm2.portName,callback:function(t){e.$set(e.ruleForm2,"portName",t)},expression:"ruleForm2.portName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"区域代码",prop:"portCode"}},[a("el-input",{attrs:{placeholder:"请输入区域代码"},model:{value:e.ruleForm2.portCode,callback:function(t){e.$set(e.ruleForm2,"portCode",t)},expression:"ruleForm2.portCode"}})],1),e._v(" "),e.noshowArae?a("el-form-item",{attrs:{label:"所属区域",prop:"parentId"}},[a("el-cascader",{ref:"cascaderHandle",attrs:{placeholder:"请选择所属区域",options:e.parentOptions,props:{checkStrictly:!0},clearable:""},on:{change:e.changeSite},model:{value:e.ruleForm2.parentId,callback:function(t){e.$set(e.ruleForm2,"parentId",t)},expression:"ruleForm2.parentId"}})],1):e._e(),e._v(" "),a("div",{staticClass:"btns",staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary",size:""},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v(e._s(e.ruleForm2.guid?"编辑":"新增"))]),e._v(" "),a("el-button",{attrs:{type:"info",size:""},on:{click:e.closeCallback}},[e._v("取消")])],1)],1)],1)}),[],!1,null,"5e6b41ae",null);t.default=n.exports},pvxR:function(e,t,a){"use strict";a.r(t);var l={name:"searchPointTab",data:function(){return{userTypeOptions:[{value:"I",label:"入境"},{value:"O",label:"出境"}],areaLevel:[{value:"1",label:"1级"},{value:"2",label:"2级"}],searchPoint:{portName:"",portCode:"",guid:"",parentId:"",level:""}}},props:{},methods:{clearUp:function(){this.searchPoint={portName:"",portCode:"",guid:"",parentId:"",level:""},this.$emit("clearUp")},searchAction:function(){this.$emit("searchAction",this.searchPoint)},addNewRole:function(){this.$emit("addNewRoom")}}},i=(a("zwtw"),a("KHd+")),n=Object(i.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"searchBox2 searchBox"},[a("p",[e._v("区域查询:")]),e._v(" "),a("el-form",{attrs:{inline:"","label-position":"top",model:e.searchPoint,size:"small","label-width":"96px"}},[a("el-form-item",{attrs:{label:"区域ID:"}},[a("el-input",{model:{value:e.searchPoint.guid,callback:function(t){e.$set(e.searchPoint,"guid",t)},expression:"searchPoint.guid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"区域名称:"}},[a("el-input",{model:{value:e.searchPoint.portName,callback:function(t){e.$set(e.searchPoint,"portName",t)},expression:"searchPoint.portName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"区域代码:"}},[a("el-input",{model:{value:e.searchPoint.portCode,callback:function(t){e.$set(e.searchPoint,"portCode",t)},expression:"searchPoint.portCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"父节点ID:"}},[a("el-input",{model:{value:e.searchPoint.parentId,callback:function(t){e.$set(e.searchPoint,"parentId",t)},expression:"searchPoint.parentId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"等级:"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.searchPoint.level,callback:function(t){e.$set(e.searchPoint,"level",t)},expression:"searchPoint.level"}},e._l(e.areaLevel,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),e._v(" "),a("div",{staticClass:"tags"},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:e.searchAction}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-delete"},on:{click:e.clearUp}},[e._v("清空")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:e.addNewRole}},[e._v("添加区域")])],1)],1)])}),[],!1,null,"5f9b3568",null);t.default=n.exports},zwtw:function(e,t,a){"use strict";a("FMUp")}}]);